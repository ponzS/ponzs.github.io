import{d as e,h as a,x as t,j as l,i as s,p as r,k as n,c,e as o,a as i,t as u,u as v,n as d,f as p,F as h,g,s as k,m,o as y,_ as f}from"./index-CwfwMfXG.js";const j={class:"project-detail-page"},b={key:0,class:"loading-container"},w={key:1,class:"error-container"},L={key:2,class:"project-detail-container"},P={class:"project-header"},U={class:"project-header-content"},A={class:"project-badges"},S={key:0,class:"featured-badge"},_={class:"project-title"},C={class:"project-description"},I={class:"project-stats"},x={class:"stat-item"},D={class:"stat-label"},F={class:"stat-value"},W={key:0,class:"stat-item"},H={class:"stat-label"},$={class:"stat-value"},z={class:"stat-item"},B={class:"stat-label"},E={class:"stat-value"},G={key:1,class:"stat-item"},M={class:"stat-label"},R={class:"stat-value"},T={class:"project-links"},N=["href"],V=["href"],K={class:"project-cover"},Z=["src","alt"],q={key:1,class:"default-cover"},J={class:"cover-text"},O={class:"project-content"},Q={class:"project-technologies"},X={class:"tech-tags"},Y={key:0,class:"project-features"},ee={class:"features-list"},ae={class:"markdown-section"},te={key:0,class:"markdown-loading"},le=["innerHTML"],se={key:2,class:"no-content"},re={key:0,class:"related-projects"},ne={class:"related-projects-grid"},ce=["onClick"],oe={class:"related-project-info"},ie=f(e({__name:"project-detail",setup(e){const f=k(),ie=m(),{locale:ue,isZh:ve,setLocale:de}=a(),{getProjectBySlug:pe,getRelatedProjects:he,loadProjectData:ge,getLocalizedValue:ke,getLocalizedArrayValue:me,loadMarkdownContent:ye}=t(),fe=l(!0),je=l(null),be=l(null),we=l(null),Le=l(!1),Pe=l(ue.value);l(null);const Ue=s(()=>be.value?he(be.value,3):[]),Ae=async()=>{try{fe.value=!0,je.value=null,we.value=null;const a=f.params.slug,t=Array.isArray(a)?a[0]:a;if(!t||"string"!=typeof t)throw new Error(ve.value?"项目标识符无效":"Invalid project slug");await ge();const l=pe(t);if(!l)throw new Error(ve.value?"项目不存在":"Project not found");let s={...l};if(l.githubUrl){const e=await(async e=>{try{const a=e.match(/github\.com\/([^/]+)\/([^/]+)/);if(!a)return null;const[,t,l]=a,s=`https://api.github.com/repos/${t}/${l}`,r=await fetch(s);return r.ok?(await r.json()).stargazers_count||0:null}catch(a){return console.error("Failed to fetch GitHub stars:",a),null}})(l.githubUrl);null!==e&&(s.githubStars=e)}if(be.value=s,l.mdPath){Le.value=!0;try{const e=ke(l.mdPath),a=await ye(e);a&&(we.value=a,Se(a))}catch(e){console.error("Failed to load markdown content:",e)}finally{Le.value=!1}}}catch(a){je.value=a instanceof Error?a.message:"Unknown error"}finally{fe.value=!1}};r(()=>{const e=f.params.slug;if(e)return Array.isArray(e)?e[0]:e},e=>{e&&"string"==typeof e&&Ae()},{immediate:!0});const Se=e=>{if(!be.value||be.value.coverImage)return;const a=e.match(/<img[^>]+src=["']([^"']+)["'][^>]*>/i);if(!a)return;const t=a[1];let l="";if(t.startsWith("./")||t.startsWith("../")||!t.startsWith("http")&&!t.startsWith("/")){l=(be.value.mdPath?ke(be.value.mdPath).replace(/\/[^/]*$/,"/"):"/md/")+t.replace(/^\.\//,"")}else(t.startsWith("/")||t.startsWith("http"))&&(l=t);l&&(be.value={...be.value,coverImage:l})};r(ue,()=>{Pe.value=ue.value});const _e=e=>new Date(e).toLocaleDateString(ve.value?"zh-CN":"en-US"),Ce=e=>{e.target.style.display="none"};return n(Ae),(e,a)=>{return y(),c("div",j,[fe.value?(y(),c("div",b,[a[1]||(a[1]=i("div",{class:"loading-spinner"},null,-1)),i("p",null,u(v(ve)?"加载项目详情...":"Loading project details..."),1)])):je.value?(y(),c("div",w,[a[2]||(a[2]=i("div",{class:"error-icon"},"⚠️",-1)),i("h2",null,u(v(ve)?"加载失败":"Loading Failed"),1),i("p",null,u(je.value),1),i("button",{onClick:Ae,class:"retry-button"},u(v(ve)?"重试":"Retry"),1)])):be.value?(y(),c("div",L,[i("div",P,[i("div",U,[i("button",{onClick:a[0]||(a[0]=a=>e.$router.back()),class:"back-button"}," ← "+u(v(ve)?"返回":"Back"),1),i("div",A,[i("span",{class:d(["status-badge",be.value.status.toLowerCase()])},u((l=be.value.status,{Active:ve.value?"活跃开发":"Active",Stable:ve.value?"稳定版本":"Stable",Archived:ve.value?"已归档":"Archived",Beta:ve.value?"测试版本":"Beta"}[l]||l)),3),be.value.featured?(y(),c("span",S," ⭐ ")):o("",!0)]),i("h1",_,u(v(ke)(be.value.title)),1),i("p",C,u(v(ke)(be.value.description)),1),i("div",I,[i("div",x,[i("span",D,u(v(ve)?"创建者":"Author"),1),i("span",F,u(be.value.author),1)]),void 0!==be.value.githubStars?(y(),c("div",W,[i("span",H,u((v(ve),"GitHub Stars")),1),i("span",$,"⭐ "+u((t=be.value.githubStars,t>=1e3?(t/1e3).toFixed(1)+"k":t.toString())),1)])):o("",!0),i("div",z,[i("span",B,u(v(ve)?"发布日期":"Published"),1),i("span",E,u(_e(be.value.publishDate)),1)]),be.value.lastUpdate?(y(),c("div",G,[i("span",M,u(v(ve)?"最后更新":"Last Update"),1),i("span",R,u(_e(be.value.lastUpdate)),1)])):o("",!0)]),i("div",T,[be.value.githubUrl?(y(),c("a",{key:0,href:be.value.githubUrl,target:"_blank",rel:"noopener noreferrer",class:"project-link github-link"},a[3]||(a[3]=[i("span",{class:"link-icon"},"🔗",-1),p(" GitHub ")]),8,N)):o("",!0),be.value.demoUrl?(y(),c("a",{key:1,href:be.value.demoUrl,target:"_blank",rel:"noopener noreferrer",class:"project-link demo-link"},[a[4]||(a[4]=i("span",{class:"link-icon"},"🚀",-1)),p(" "+u(v(ve)?"在线演示":"Live Demo"),1)],8,V)):o("",!0)])]),i("div",K,[be.value.coverImage&&"/images/projects/default-cover.jpg"!==be.value.coverImage?(y(),c("img",{key:0,src:be.value.coverImage,alt:v(ke)(be.value.title),class:"cover-image",onError:Ce},null,40,Z)):(y(),c("div",q,[a[5]||(a[5]=i("div",{class:"grid-pattern"},null,-1)),i("div",J,[i("h3",null,u(v(ke)(be.value.title)),1),i("p",null,u(be.value.category),1)])]))])]),i("div",O,[i("div",Q,[i("h3",null,u(v(ve)?"使用技术":"Technologies"),1),i("div",X,[(y(!0),c(h,null,g(be.value.technologies,e=>(y(),c("span",{key:e,class:"tech-tag"},u(e),1))),128))])]),v(me)(be.value.features)?.length?(y(),c("div",Y,[i("h3",null,u(v(ve)?"主要特性":"Key Features"),1),i("ul",ee,[(y(!0),c(h,null,g(v(me)(be.value.features),e=>(y(),c("li",{key:e},u(e),1))),128))])])):o("",!0),i("div",ae,[i("h3",null,u(v(ve)?"项目详情":"Project Details"),1),Le.value?(y(),c("div",te,[a[6]||(a[6]=i("div",{class:"loading-spinner"},null,-1)),i("p",null,u(v(ve)?"加载详细内容...":"Loading detailed content..."),1)])):we.value?(y(),c("div",{key:1,class:"markdown-content",innerHTML:we.value},null,8,le)):(y(),c("div",se,[i("p",null,u(v(ve)?"暂无详细内容":"No detailed content available"),1)]))])]),Ue.value.length?(y(),c("div",re,[i("h3",null,u(v(ve)?"相关项目":"Related Projects"),1),i("div",ne,[(y(!0),c(h,null,g(Ue.value,e=>(y(),c("div",{key:e.id,class:"related-project-card",onClick:a=>{return t=e.slug,void ie.push(`/projects/${t}`);var t}},[i("div",oe,[i("h4",null,u(v(ke)(e.title)),1),i("p",null,u(v(ke)(e.excerpt)),1)])],8,ce))),128))])])):o("",!0)])):o("",!0)]);var t,l}}}),[["__scopeId","data-v-00cead2e"]]);export{ie as default};
