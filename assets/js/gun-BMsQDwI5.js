import{r as t}from"./vue-CtS7YL1H.js";var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function r(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var n=t.default;if("function"==typeof n){var e=function t(){var e=!1;try{e=this instanceof t}catch{}return e?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};e.prototype=n.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),e}function i(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var o,a,s,c={exports:{}};function u(){return o||(o=1,t=c,function(){function n(t,e){return e?i(t):t.slice?n[r(t)]:function(e,i){t(e={exports:{}}),n[r(i)]=e.exports};function r(t){return t.split("/").slice(-1).toString().replace(".js","")}}var e=t;n(function(t){String.random=function(t,n){var e="";for(t=t||24,n=n||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";t-- >0;)e+=n.charAt(Math.floor(Math.random()*n.length));return e},String.match=function(t,n){var e,r;return"string"==typeof t&&("string"==typeof n&&(n={"=":n}),t===(e=(n=n||{})["="]||n["*"]||n[">"]||n["<"])||r===n["="]&&(e=n["*"]||n[">"],t.slice(0,(e||"").length)===e||r===n["*"]&&(r!==n[">"]&&r!==n["<"]?t>=n[">"]&&t<=n["<"]:r!==n[">"]&&t>=n[">"]||r!==n["<"]&&t<=n["<"])))},String.hash=function(t,n){if("string"==typeof t){if(n=n||0,!t.length)return n;for(var e=0,r=t.length;e<r;++e)n=(n<<5)-n+t.charCodeAt(e),n|=0;return n}};var n,e,r,i,o,a,s,c,u=Object.prototype.hasOwnProperty;Object.plain=function(t){return!!t&&(t instanceof Object&&t.constructor===Object||"Object"===Object.prototype.toString.call(t).match(/^\[object (\w+)\]$/)[1])},Object.empty=function(t,n){for(var e in t)if(u.call(t,e)&&(!n||-1==n.indexOf(e)))return!1;return!0},Object.keys=Object.keys||function(t){var n=[];for(var e in t)u.call(t,e)&&n.push(e);return n},i=setTimeout,o=0,a=0,s=typeof setImmediate!=""+n&&setImmediate||(typeof MessageChannel==""+n?i:((e=new MessageChannel).port1.onmessage=function(t){""==t.data&&r()},function(t){r=t,e.port2.postMessage("")})),c=i.check=i.check||typeof performance!=""+n&&performance||{now:function(){return+new Date}},i.hold=i.hold||9,i.poll=i.poll||function(t){i.hold>=c.now()-o&&a++<3333?t():s(function(){o=c.now(),t()},a=0)},function(){var t,n=setTimeout,e=n.turn=n.turn||function(t){1==r.push(t)&&i(a)},r=e.s=[],i=n.poll,o=0,a=function(){(t=r[o++])&&t(),o!=r.length&&99!=o||(r=e.s=r.slice(o),o=0),r.length&&i(a)}}(),function(){var t,n=setTimeout,e=n.turn;(n.each=n.each||function(n,r,i,o){o=o||9,function a(s,c,u){if(c=(s=(n||[]).splice(0,o)).length){for(var f=0;f<c&&t===(u=r(s[f]));f++);if(t===u)return void e(a)}i&&i(u)}()})()}()})(n,"./shim"),n(function(t){t.exports=function t(n,e,r){if(!n)return{to:t};var i="function"==typeof e;if(n=(this.tag||(this.tag={}))[n]||i&&(this.tag[n]={tag:n,to:t._={next:function(t){var n;(n=this.to)&&n.next(t)}}}),i){var o={off:t.off||(t.off=function(){if(this.next===t._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=t._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:t._,next:e,the:n,on:this,as:r};return(o.back=n.last||n).to=o,n.last=o}return(n=n.to)&&void 0!==e&&n.next(e),n}})(n,"./onto"),n(function(t){t.exports=function(t){return null===t||"string"==typeof t||"boolean"==typeof t||"number"==typeof t&&t!=1/0&&t!=-1/0&&t==t||!!t&&"string"==typeof t["#"]&&1===Object.keys(t).length&&t["#"]}})(n,"./valid"),n(function(t){function e(){var t=+new Date;return s<t?(o=0,s=t+e.drift):s=t+(o+=1)/a+e.drift}n("./shim"),e.drift=0;var r,i=-1/0,o=0,a=999,s=i;e.is=function(t,n,e){var r=n&&t&&t._&&t._[">"]||e;if(r)return"number"==typeof(r=r[n])?r:i},e.ify=function(t,n,e,i,o){(t=t||{})._=t._||{},o&&(t._["#"]=o);var a=t._[">"]||(t._[">"]={});return r!==n&&"_"!==n&&("number"==typeof e&&(a[n]=e),r!==i&&(t[n]=i)),t},t.exports=e})(n,"./state"),n(function(t){n("./shim"),t.exports=function(t){var n={s:{}},e=n.s;t=t||{max:999,age:9e3},n.check=function(t){return!!e[t]&&r(t)};var r=n.track=function(i){var o=e[i]||(e[i]={});return o.was=n.now=+new Date,n.to||(n.to=setTimeout(n.drop,t.age+9)),r.ed&&r.ed(i),o};return n.drop=function(r){n.to=null,n.now=+new Date;var i=Object.keys(e);console.STAT,setTimeout.each(i,function(i){var o=e[i];o&&(r||t.age)>n.now-o.was||delete e[i]},0,99)},n}})(n,"./dup"),n(function(t){n("./onto"),t.exports=function(t,n){if(this.on){var r=(this.opt||{}).lack||9e3;if("function"!=typeof t){if(!t)return;var i=t["#"]||t,o=(this.tag||"")[i];if(!o)return;return n&&(o=this.on(i,n),clearTimeout(o.err),o.err=setTimeout(function(){o.off()},r)),!0}if(i=n&&n["#"]||e(9),!t)return i;var a=this.on(i,t,n);return a.err=a.err||setTimeout(function(){a.off(),a.next({err:"Error: No ACK yet.",lack:!0})},r),i}};var e=String.random||function(){return Math.random().toString(36).slice(2)}})(n,"./ask"),n(function(t){function r(t){return t instanceof r?(this._={$:this}).$:this instanceof r?r.create(this._={$:this,opt:t}):new r(t)}r.is=function(t){return t instanceof r||t&&t._&&t===t._.$||!1},r.version=.202,r.chain=r.prototype,r.chain.toJSON=function(){},n("./shim"),r.valid=n("./valid"),r.state=n("./state"),r.on=n("./onto"),r.dup=n("./dup"),r.ask=n("./ask"),function(){function t(e){if(e)if(e.out!==t){var i,o=this.as,c=o.at||o,u=c.$,f=c.dup,l=e.DBG;if((i=e["#"])||(i=e["#"]=s(9)),!f.check(i)){if(f.track(i),i=e._,e._="function"==typeof i?i:function(){},e.$&&e.$===(e.$._||"").$||(e.$=u),e["@"]&&!e.put&&function(t){var n,e=t["@"]||"";if(n=e._)n.acks=(n.acks||0)+1,(n.err=t.err)&&(t["@"]=n["#"],a(n)),n.ok=t.ok||n.ok,n.stop||n.crack||(n.crack=n.match&&n.match.push(function(){h(n)})),h(n);else{var r=(r=t.$)&&(r=r._)&&(r=r.root)&&(r=r.dup);if(!(r=r.check(e)))return;t["@"]=r["#"]||t["@"]}}(e),!c.ask(e["@"],e)){if(l&&(l.u=+new Date),e.put)return void n(e);e.get&&r.on.get(e,u)}l&&(l.uc=+new Date),this.to.next(e),l&&(l.ua=+new Date),e.nts||e.NTS||(e.out=t,c.on("out",e),l&&(l.ue=+new Date))}}else this.to.next(e)}function n(n){if(n){var r=n._||"",o=r.root=((r.$=n.$||"")._||"").root;if(n["@"]&&r.faith&&!r.miss)return n.out=t,void o.on("out",n);r.latch=o.hatch,r.match=o.hatch=[];var s=n.put,f=r.DBG=n.DBG,l=+new Date;if(d=d||l,!s["#"]||!s["."]){f&&(f.p=l),r["#"]=n["#"],r.msg=n,r.all=0,r.stun=1;var p=Object.keys(s);console.STAT;var h,y,v,b,$,k,w,_=0;!function t(o){if(h!=_){if(h=_,!(v=p[_]))return console.STAT,void a(r);(b=s[v])?(w=b._)?v!==w["#"]?k=g+m(v)+"soul not same.":($=w[">"])||(k=g+m(v)+"no state."):k=g+m(v)+"no meta.":k=g+m(v)+"no node.",y=Object.keys(b||{})}if(k)return n.err=r.err=k,void a(r);var f,l=0;for(o=o||0;o++<9&&(f=y[l++]);)if("_"!==f){var d=b[f],j=$[f];if(i===j){k=g+m(f)+"on"+m(v)+"no state.";break}if(!u(d)){k=g+m(f)+"on"+m(v)+"bad "+typeof d+m(d);break}e(d,f,v,j,n),++x}(y=y.slice(l)).length?c(t):(++_,y=null,t(o))}()}}}function e(t,n,r,i,o){var a,s=o._||"",c=s.root,u=c.graph,l=u[r]||p,h=f(l,n,1),d=l[n],g=s.DBG;(a=console.STAT)&&(u[r]&&d||(a.has=(a.has||0)+1));var m=b();if(i>m)return setTimeout(function(){e(t,n,r,i,o)},(a=i-m)>v?v:a),void console.STAT;if(!(i<h)&&(s.faith||i!==h||!(t===d||y(t)<=y(d))||s.miss)){s.stun++;var x=o["#"]+s.all++,$={toString:function(){return x},_:s};$.toJSON=$.toString,c.dup.track($)["#"]=o["#"],g&&(g.ph=g.ph||+new Date),c.on("put",{"#":$,"@":o["@"],put:{"#":r,".":n,":":t,">":i},ok:o.ok,_:s})}}function o(t){var n;(n=(t._||"").DBG)&&(n.pa=+new Date,n.pm=n.pm||+new Date);var e,r=this.as,i=r.graph,o=t._,s=t.put,c=s["#"],u=s["."],f=s[":"],p=s[">"];t["#"],(e=o.msg)&&(e=e.put)&&(e=e[c])&&l(e,u,p,f,c),i[c]=l(i[c],u,p,f,c),(e=(r.next||"")[c])&&e.on("in",t),a(o),this.to.next(t)}function a(n,e){var r;if(!n.stop&&(n.err||!(0<--n.stun))&&(n.stop=1,r=n.root)){var i=n.match;i.end=1,i===r.hatch&&(!(i=n.latch)||i.end?delete r.hatch:r.hatch=i),n.hatch&&n.hatch(),setTimeout.each(n.match,function(t){t&&t()}),!(e=n.msg)||n.err||e.err||(e.out=t,n.root.on("out",e),$())}}function h(t){t&&t.root&&(t.stun||t.acks!==t.all||t.root.on("in",{"@":t["#"],err:t.err,ok:t.err?i:t.ok||{"":1}}))}r.create=function(n){n.root=n.root||n,n.graph=n.graph||{},n.on=n.on||r.on,n.ask=n.ask||r.ask,n.dup=n.dup||r.dup();var e=n.$.opt(n.opt);return n.once||(n.on("in",t,n),n.on("out",t,n),n.on("put",o,n),r.on("create",n),n.on("create",n)),n.once=1,e},r.on.put=n;var d,g="Error: Invalid graph!",m=function(t){return" '"+(""+t).slice(0,9)+"...' "},y=JSON.stringify,v=2147483647,b=r.state,x=0,$=function(){x>999&&x/-(d-(d=+new Date))>1&&(r.window,$=function(){x=0})}}(),function(){function t(t,n){var e=(t._||{}).DBG=t.DBG,r=t["#"],o=s(9),a=Object.keys(n||"").sort(),c=((n||"")._||"")["#"];a.length;var u=t.$._.root,p=n===u.graph[c];console.STAT,n&&function t(){for(var h,d,g,m=0,y={};m<9&&(h=a[m++]);)l(y,h,f(n,h),n[h],c);a=a.slice(m),(d={})[c]=y,y=d,p&&((g=function(){}).ram=g.faith=!0),d=a.length,console.STAT,e&&(e.ga=+new Date),u.on("in",{"@":r,"#":o,put:y,"%":d?o=s(9):i,$:u.$,_:g,DBG:e,FOO:1}),console.STAT,d&&setTimeout.turn(t)}(),n||u.on("in",{"@":t["#"]})}r.on.get=function(n,e){var r=e._,o=n.get,a=o["#"],s=r.graph[a],c=o["."],u=(r.next||(r.next={}))[a],p=(n._||{}).DBG=n.DBG;if(p&&(p.g=+new Date),!s)return r.on("get",n);if(c){if(("string"!=typeof c||i===s[c])&&!((u||"").next||"")[c])return void r.on("get",n);s=l({},c,f(s,c),s[c],a)}s&&t(n,s),r.on("get",n)},r.on.get.ack=t}(),r.chain.opt=function(t){t=t||{};var n=this._,e=t.peers||t;return Object.plain(t)||(t={}),Object.plain(n.opt)||(n.opt=t),"string"==typeof e&&(e=[e]),Object.plain(n.opt.peers)||(n.opt.peers={}),e instanceof Array&&(t.peers={},e.forEach(function(e){var r={};r.id=r.url=e,t.peers[e]=n.opt.peers[e]=n.opt.peers[e]||r})),a(t,function t(n){var e=this[n];this&&this.hasOwnProperty(n)||"string"==typeof e||Object.empty(e)?this[n]=e:(!e||e.constructor===Object||e instanceof Array)&&a(e,t)}),n.opt.from=t,r.on("opt",n),n.opt.uuid=n.opt.uuid||function(t){return r.state().toString(36).replace(".","")+String.random(t||12)},this};var i,o,a=function(t,n){Object.keys(t).forEach(n,t)},s=String.random,c=setTimeout.turn,u=r.valid,f=r.state.is,l=r.state.ify,p={};r.log=function(){return!r.log.off&&o.log.apply(o,arguments),[].slice.call(arguments).join(" ")},r.log.once=function(t,n,e){return(e=r.log.once)[t]=e[t]||0,e[t]++||r.log(n)},"undefined"!=typeof window&&((window.GUN=window.Gun=r).window=window);try{void 0!==e&&(e.exports=r)}catch(h){}t.exports=r,(r.window||{}).console=(r.window||{}).console||{log:function(){}},(o=console).only=function(t,n){return o.only.i&&t===o.only.i&&o.only.i++&&(o.log.apply(o,arguments)||n)},r.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(n,"./root"),n(function(t){n("./root").chain.back=function(t,n){if(-1===(t=t||1)||1/0===t)return this._.root.$;if(1===t)return(this._.back||this._).$;var i=this._;if("string"==typeof t&&(t=t.split(".")),t instanceof Array){for(var o=0,a=t.length,s=i;o<a;o++)s=(s||r)[t[o]];return e!==s?n?this:s:(s=i.back)?s.$.back(t,n):void 0}if("function"==typeof t){var c;for(s={back:i};(s=s.back)&&e===(c=t(s,n)););return c}return"number"==typeof t?(i.back||i).$.back(t-1):this};var e,r={}})(n,"./back"),n(function(t){var e=n("./root");function r(t,n){if(n=n||this.as||t.$._,(!t.$$||this===e.on)&&t.put&&!n.soul){var r=t.put||"",i=r["="]||r[":"],o=n.root,a=o.$.get(r["#"]).get(r["."])._;if("string"==typeof(i=u(i))){if(!(a.echo||(a.echo={}))[n.id]||(o.pass||"")[n.id]){if(s=o.pass){if(s[i+n.id])return;s[i+n.id]=1}(a.echo||(a.echo={}))[n.id]=n,n.has&&(n.link=i);var s,c=o.$.get(a.link=i)._;(c.echo||(c.echo={}))[a.id]=a,((s=n.ask||"")[""]||n.lex)&&c.on("out",{get:{"#":i}}),setTimeout.each(Object.keys(s),function(t,n){t&&(n=s[t])&&n.on("out",{get:{"#":i,".":t}})},0,99)}}else this===e.on&&((a.echo||(a.echo={}))[n.id]=n)}}function i(t,n){var e,r,o=t.put||"",s=a!==o["="]?o["="]:o[":"],c=n.root;if(a===s){if(n.soul&&a!==n.put)return;if(r=(t.$$||t.$||"")._||"",t["@"]&&(a!==r.put||a!==n.put))return;return(e=n.link||t.linked)&&delete(c.$.get(e)._.echo||"")[n.id],n.has&&(n.link=null),n.put=a,void setTimeout.each(Object.keys(n.next||""),function(t,r){(r=n.next[t])&&(e&&delete(c.$.get(e).get(t)._.echo||"")[r.id],r.on("in",{get:t,put:a,$:r.$}))},0,99)}n.soul||t.$$||(e=u(s),r=t.$._||"",(e!==r.link&&(!n.has||r.link)||(c.pass||"")[n.id]&&"string"!=typeof e)&&(delete(r.echo||"")[n.id],i({get:n.get,put:a,$:t.$,linked:t.linked=t.linked||r.link},n)))}function o(t,n){var r=this.as,i=r.$._;i.root;var o=r.get||"",s=(t.put||"")[o["#"]]||"";if(!t.put||"string"==typeof o["."]&&a===s[o["."]]){if(a!==i.put)return;if(!i.soul&&!i.has)return;return i.ack=(i.ack||0)+1,void i.on("in",{get:i.get,put:i.put=a,$:i.$,"@":t["@"]})}(t._||{}).miss=1,e.on.put(t)}e.chain.chain=function(t){var n,r=this,i=r._,o=new(t||r).constructor(r),a=o._;return a.root=n=i.root,a.id=++n.once,a.back=r._,a.on=e.on,a.on("in",e.on.in,a),a.on("out",e.on.out,a),o},e.on.out=function(t){var n,e,r=this.as,i=r.back,s=r.root;if(t.$||(t.$=r.$),this.to.next(t),!r.err){if(n=t.get){if(s.pass&&(s.pass[r.id]=r),r.lex&&Object.keys(r.lex).forEach(function(t){e[t]=r.lex[t]},e=t.get=t.get||{}),n["#"]||r.soul){if(n["#"]=n["#"]||r.soul,t["#"]||(t["#"]=c(9)),i=s.$.get(n["#"])._,n=n["."]){if(f(i.put,n)&&(e=i.ask&&i.ask[n],(i.ask||(i.ask={}))[n]=i.$.get(n)._,i.on("in",{get:n,put:{"#":i.soul,".":n,":":i.put[n],">":p(s.graph[i.soul],n)}}),e))return}else{if(e=i.ask&&i.ask[""],(i.ask||(i.ask={}))[""]=i,a!==i.put&&(i.on("in",i),e))return;t.$=i.$}return s.ask(o,t),s.on("in",t)}if(n["."])return r.get?(t={get:{".":r.get},$:r.$},(i.ask||(i.ask={}))[r.get]=t.$._,i.on("out",t)):(t={get:r.lex?t.get:{},$:r.$},i.on("out",t));if((r.ask||(r.ask={}))[""]=r,r.get)return n["."]=r.get,(i.ask||(i.ask={}))[r.get]=t.$._,i.on("out",t)}return i.on("out",t)}r.on("in",{put:r.put=a,$:r.$})},e.on.in=function(t,n){var e,o=(n=n||this.as).root,c=t.$||(t.$=n.$),f=(c||"")._||s,l=t.put||"",d=l["#"],g=l["."],m=a!==l["="]?l["="]:l[":"],y=l[">"]||-1/0;if(a===t.put||a!==l["#"]&&a!==l["."]&&(a!==l[":"]||a!==l["="])&&a!==l[">"])(t.seen||"")[n.id]||((t.seen||(t.seen=function(){}))[n.id]=n,n!==f&&(Object.keys(t).forEach(function(n){l[n]=t[n]},l={}),l.get=n.get||l.get,n.soul||n.has?f.soul&&(l.$=n.$,l.$$=l.$$||f.$):l.$$$=l.$$$||n.$,t=l),i(t,n),(n.soul||t.$$)&&y>=p(o.graph[d],g)&&((l=o.$.get(d)._).put=h(l.put,g,y,m,d)),!f.soul&&y>=p(o.graph[d],g)&&(e=(o.$.get(d)._.next||"")[g])&&(e.put=m,"string"==typeof(l=u(m))&&(e.put=o.$.get(l)._.put||m)),this.to&&this.to.next(t),n.any&&setTimeout.each(Object.keys(n.any),function(e){(e=n.any[e])&&e(t)},0,99),n.echo&&setTimeout.each(Object.keys(n.echo),function(e){(e=n.echo[e])&&e.on("in",t)},0,99),((t.$$||"")._||f).soul&&(e=n.next)&&(e=e[g])&&(l={},Object.keys(t).forEach(function(n){l[n]=t[n]}),l.$=(t.$$||t.$).get(l.get=g),delete l.$$,delete l.$$$,e.on("in",l)),r(t,n));else{if(!u(l)){if(!(d=((l||"")._||"")["#"]))return;return c=n.root.$.get(d),setTimeout.each(Object.keys(l).sort(),function(e){"_"!=e&&a!==(y=p(l,e))&&n.on("in",{$:c,put:{"#":d,".":e,"=":l[e],">":y},VIA:t})})}n.on("in",{$:f.back.$,put:{"#":d=f.back.soul,".":g=f.has||f.get,"=":l,">":p(f.back.put,g)},via:t})}},e.on.link=r,e.on.unlink=i;var a,s={},c=String.random,u=e.valid,f=function(t,n){return t&&Object.prototype.hasOwnProperty.call(t,n)},l=e.state,p=l.is,h=l.ify})(n,"./chain"),n(function(t){var e=n("./root");function r(t){var n=this.at||this.on;if(!t||n.soul||n.has)return this.off();if(t=(t=(t=t.$||t)._||t).id){var e;if(n.map,(e=this.seen||(this.seen={}))[t])return!0;e[t]=!0}}e.chain.get=function(t,n,s){var c,u;if("string"==typeof t){if(0==t.length)return(c=this.chain())._.err={err:e.log("0 length key!",t)},n&&n.call(c,c._.err),c;(c=((l=this._).next||o)[t])||(c=t&&function(t,n){var e=n._,r=e.next,i=n.chain(),o=i._;return r||(r=e.next={}),r[o.get=t]=o,n===e.root.$?o.soul=t:(e.soul||e.has)&&(o.has=t),o}(t,this)),c=c&&c.$}else{if("function"==typeof t){let o=function(t,n,r){if(!o.stun&&(!(a=h.pass)||a[f])){var a,s=t.$._,c=(t.$$||"")._,u=(c||s).put,g=!s.has&&!s.soul,m={};if((g||i===u)&&(u=i===((a=t.put)||"")["="]?i===(a||"")[":"]?a:a[":"]:a["="]),"string"==typeof(a=e.valid(u))&&(u=i===(a=h.$.get(a)._.put)?p.not?i:u:a),!p.not||i!==u){if(i===p.stun){if((a=h.stun)&&a.on&&(l.$.back(function(t){if(a.on(""+t.id,m={}),(m.run||0)<o.id)return m}),!m.run&&a.on(""+s.id,m={}),!m.run&&c&&a.on(""+c.id,m={}),o.id>m.run&&(m.stun&&!m.stun.end||(m.stun=a.on("stun"),m.stun=m.stun&&m.stun.last),m.stun&&!m.stun.end)))return void((m.stun.add||(m.stun.add={}))[f]=function(){o(t,n,1)});if(i===u&&(r=0),(a=h.hatch)&&!a.end&&i===p.hatch&&!r){if(d[s.$._.id])return;return d[s.$._.id]=1,void a.push(function(){o(t,n,1)})}d={}}if(h.pass){if(h.pass[f+s.id])return;h.pass[f+s.id]=1}p.on?p.ok.call(s.$,u,s.get,t,n||o):p.v2020?p.ok(t,n||o):(Object.keys(t).forEach(function(n){a[n]=t[n]},a={}),(t=a).put=u,p.ok.call(p.as,t,n||o))}}};if(!0===n)return function(t,n,r,o){var a,s=t._,c=0;(a=s.soul||s.link)?n(a,o,s):s.jam?s.jam.push([n,o]):(s.jam=[[n,o]],t.get(function(t,n){if(!(i===t.put&&!s.root.opt.super&&(a=Object.keys(s.root.opt.peers).length)&&++c<=a)){n.rid(t);var r,o=(o=t.$)&&o._||{},u=0;for(a=s.jam,delete s.jam;r=a[u++];){var f=r[0];r=r[1],f&&f(o.link||o.soul||e.valid(t.put)||((t.put||{})._||{})["#"],r,t,n)}}},{out:{get:{".":!0}}}))}(this,t,0,s),this;var f,l=(c=this)._,p=n||{},h=l.root;p.at=l,p.ok=t;var d={};return o.at=l,(l.any||(l.any={}))[f=String.random(7)]=o,o.off=function(){o.stun=1,l.any&&delete l.any[f]},o.rid=r,o.id=p.run||++h.once,u=h.pass,(h.pass={})[f]=1,p.out=p.out||{get:{}},l.on("out",p.out),h.pass=u,c}if("number"==typeof t)return this.get(""+t,n,s);if("string"==typeof(u=a(t)))return this.get(u,n,s);(u=this.get.next)&&(c=u(this,t))}return c?(n&&"function"==typeof n&&c.get(n,s),c):((c=this.chain())._.err={err:e.log("Invalid get request!",t)},n&&n.call(c,c._.err),c)};var i,o={},a=e.valid})(n,"./get"),n(function(t){var e=n("./root");function r(t,n){if(n){n=(n._||"").id||n;var r,i=t.root.stun||(t.root.stun={on:e.on}),o={};t.stun||(t.stun=i.on("stun",function(){})),(r=i.on(""+n))&&r.the.last.next(o),o.run>=t.run||i.on(""+n,function(n){if(t.stun.end)return this.off(),void this.to.next(n);n.run=n.run||t.run,n.stun=n.stun||t.stun})}}function i(t){if(t.err)i.end(t.stun,t.root);else if(!t.todo.length&&!t.end&&Object.empty(t.wait)){t.end=1;var n,r=t.$.back(-1)._,o=r.root,a=r.ask(function(n){o.on("ack",n),n.err&&!n.lack&&e.log(n),++s>(t.acks||0)&&this.off(),t.ack&&t.ack(n,this)},t.opt),s=0,c=t.stun;(n=function(){c&&(i.end(c,o),setTimeout.each(Object.keys(c=c.add||""),function(t){(t=c[t])&&t()}))}).hatch=n,t.ack&&!t.ok&&(t.ok=t.acks||9),t.via._.on("out",{put:t.out=t.graph,ok:t.ok&&{"@":t.ok+1},opt:t.opt,"#":a,_:n})}}e.chain.put=function(t,n,a){var f=this,l=f._,p=l.root;(a=a||{}).root=l.root,a.run||(a.run=p.once),r(a,l.id),a.ack=a.ack||n,a.via=a.via||f,a.data=a.data||t,a.soul||(a.soul=l.soul||"string"==typeof n&&n);var h=a.state=a.state||e.state();return"function"==typeof t?(t(function(t){a.data=t,f.put(o,o,a)}),f):a.soul?(a.$=p.$.get(a.soul),a.todo=[{it:a.data,ref:a.$}],a.turn=a.turn||s,a.ran=a.ran||i,function t(){var n,o,s,f,l,p=a.todo,d=p.pop(),g=d.it;if(d.ref&&d.ref._.id,r(a,d.ref),(f=d.todo)&&(g=g[o=f.pop()],f.length&&p.push(d)),o&&(p.path||(p.path=[])).push(o),!(n=c(g))&&!(l=e.is(g))){if(!Object.plain(g))return void i.err(a,"Invalid data: "+function(t,n){return t&&(n=t.constructor)&&n.name||typeof t}(g)+" at "+(a.via.back(function(t){t.get&&f.push(t.get)},f=[])||f.join("."))+"."+(p.path||[]).join("."));for(var m=a.seen||(a.seen=[]),y=m.length;y--;)if(g===(f=m[y]).it){n=g=f.link;break}}if(o&&n)d.node=u(d.node,o,h,g);else{let t=function(n,e){var i=s.link["#"];e&&(e.off(),e.rid(n));var o=i||n.soul||(f=(n.$$||n.$)._||"").soul||f.link||((f=f.put||"")._||"")["#"]||f["#"]||((f=n.put||"")&&n.$$?f["#"]:(f["="]||f[":"]||"")["#"]);!i&&r(a,n.$),o||d.link["#"]?(o||(o=[],(n.$$||n.$).back(function(t){if(f=t.soul||t.link)return o.push(f);o.push(t.get)}),o=o.reverse().join("/")),s.link["#"]=o,!l&&(((a.graph||(a.graph={}))[o]=s.node||(s.node={_:{}}))._["#"]=o),delete a.wait[v],s.wait&&setTimeout.each(s.wait,function(t){t&&t()}),a.ran(a)):(d.wait||(d.wait=[])).push(function(){t(n,e)})};if(!a.seen)return void i.err(a,"Data at root of graph must be a node (an object).");a.seen.push(s={it:g,link:{},todo:l?[]:Object.keys(g).sort().reverse(),path:(p.path||[]).slice(),up:d}),d.node=u(d.node,o,h,s.link),!l&&s.todo.length&&p.push(s);var v=a.seen.length;(a.wait||(a.wait={}))[v]="",f=(s.ref=l?g:o?d.ref.get(o):d.ref)._,(f=g&&(g._||"")["#"]||f.soul||f.link)?t({soul:f}):s.ref.get(t,{run:a.run,v2020:1,out:{get:{".":" "}}})}if(!p.length)return a.ran(a);a.turn(t)}(),f):(function(t){var n,e=t.via._;t.via=t.via.back(function(e){if(e.soul||!e.get)return e.$;n=t.data,(t.data={})[e.get]=n}),t.via&&t.via._.soul||(t.via=e.root.$.get(((t.data||"")._||"")["#"]||e.$.back("opt.uuid")())),t.via.put(t.data,t.ack,t)}(a),f)},i.end=function(t,n){t.end=a,t.the.to===t&&t===t.the.last&&delete n.stun,t.off()},i.err=function(t,n){(t.ack||a).call(t,t.out={err:t.err=e.log(n)}),t.ran(t)};var o,a=function(){},s=setTimeout.turn,c=e.valid,u=e.state.ify})(n,"./put"),n(function(t){var e=n("./root");n("./chain"),n("./back"),n("./put"),n("./get"),t.exports=e})(n,"./index"),n(function(t){var e,r=n("./index");r.chain.on=function(t,n,e,r){var i,o=this,a=o._;if(a.root,"string"==typeof t)return n?(i=a.on(t,n,e||a,r),e&&e.$&&(e.subs||(e.subs=[])).push(i),o):a.on(t);var s=n;return(s=!0===s?{change:!0}:s||{}).not=1,s.on=1,o.get(t,s),o},r.chain.once=function(t,n){if(n=n||{},!t)return function(t,n,e){return r.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(e=t.chain())._.nix=t.once(function(t,n){e._.on("in",this._)}),e._.lex=t._.lex,e}(this);var i=this,o=i._,a=o.root;o.put;var s,c=String.random(7);return i.get(function(i,u,f,l){var p=this,h=p._,d=h.one||(h.one={});function g(m){h.has||h.soul||(h={put:i,get:u}),e===(s=h.put)&&(s=((f.$$||"")._||"").put),"string"!=typeof r.valid(s)||(s=a.$.get(s)._.put)!==e||m?l.stun||""!==d[c]&&(d[c]="",(o.soul||o.has)&&l.off(),t.call(p,s,h.get),clearTimeout(d[c])):d[c]=setTimeout(function(){g(1)},n.wait||99)}l.stun||""!==d[c]&&(!0!==(s=r.valid(i))?"string"!=typeof s&&(clearTimeout((o.one||"")[c]),clearTimeout(d[c]),d[c]=setTimeout(g,n.wait||99)):g())},{on:1}),i},r.chain.off=function(){var t,n=this._,e=n.back;if(e)return n.ack=0,(t=e.next)&&t[n.get]&&delete t[n.get],(t=e.any)&&(delete e.any,e.any={}),(t=e.ask)&&delete t[n.get],(t=e.put)&&delete t[n.get],(t=n.soul)&&delete e.root.graph[t],(t=n.map)&&Object.keys(t).forEach(function(n,r){(r=t[n]).link&&e.root.$.get(r.link).off()}),(t=n.next)&&Object.keys(t).forEach(function(n,e){t[n].$.off()}),n.on("off",{}),this}})(n,"./on"),n(function(t){var e=n("./index"),r=e.chain.get.next;function i(t){this.to.next(t);var n,r=this.as,i=t.$._,o=t.put;(i.soul||t.$$)&&((n=r.lex)&&!String.match(t.get||(o||"")["."],n["."]||n["#"]||n)||e.on.link(t,r))}e.chain.get.next=function(t,n){var e;return Object.plain(n)?(e=((e=n["#"])||"")["="]||e)?t.get(e):((e=t.chain()._).lex=n,t.on("in",function(t){String.match(t.get||(t.put||"")["."],n["."]||n["#"]||n)&&e.on("in",t),this.to.next(t)}),e.$):(r||a)(t,n)},e.chain.map=function(t,n,r){var s,c,u=this,f=u._;return Object.plain(t)&&(s=t["."]?t:{".":t},t=o),t?(e.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),c=u.chain(),u.map().on(function(n,r,i,s){var u=(t||a).call(this,n,r,i,s);if(o!==u){if(n===u)return c._.on("in",i);if(e.is(u))return c._.on("in",u._);var f={};Object.keys(i.put).forEach(function(t){f[t]=i.put[t]},f),f["="]=u,c._.on("in",{get:r,put:f})}}),c):((c=f.each)||((f.each=c=u.chain())._.lex=s||c._.lex||f.lex,c._.nix=u.back("nix"),u.on("in",i,c._)),c)};var o,a=function(){}})(n,"./map"),n(function(t){var e=n("./index");e.chain.set=function(t,n,r){var i,o,a=this,s=a.back(-1);return n=n||function(){},(r=r||{}).item=r.item||t,(i=((t||"")._||"")["#"])&&((t={})["#"]=i),"string"==typeof(o=e.valid(t))?a.get(i=o).put(t,n,r):e.is(t)?(a.put(function(r){t.get(function(t,i,s){if(!t)return n.call(a,{err:e.log('Only a node can be linked! Not "'+s.put+'"!')});(o={})[t]={"#":t},r(o)},!0)}),t):(Object.plain(t)&&(t=s.get(i=a.back("opt.uuid")()).put(t)),a.get(i||s.back("opt.uuid")(7)).put(t,n,r))}})(n,"./set"),n(function(t){n("./shim");var e,r=function(){},i=JSON.parseAsync||function(t,n,e){var r=+new Date;try{n(void 0,JSON.parse(t,e),o.sucks(+new Date-r))}catch(i){n(i)}},o=JSON.stringifyAsync||function(t,n,e,r){var i=+new Date;try{n(void 0,JSON.stringify(t,e,r),o.sucks(+new Date-i))}catch(a){n(a)}};o.sucks=function(t){t>99&&(o.sucks=r)};try{t.exports=function(t){var n=function(){},r=t.opt||{};r.log=r.log||console.log,r.gap=r.gap||r.wait||0,r.max=r.max||.3*(r.memory?999*r.memory*999:3e8),r.pack=r.pack||.01*r.max*.01,r.puff=r.puff||9;var a=setTimeout.turn||setTimeout,s=t.dup,c=s.check,u=s.track,f=n.hear=function(t,e){if(t){if(r.max<=t.length)return n.say({dam:"!",err:"Message too big!"},e);n===this&&(f.d+=t.length||0,++f.c);var o,s=e.SH=+new Date,c=t[0];return"["===c?(i(t,function(t,i){if(t||!i)return n.say({dam:"!",err:"DAM JSON parse error."},e);console.STAT;var o=r.puff;!function t(){for(var r,s=0;s<o&&(r=i[s++]);)n.hear(r,e);i=i.slice(s),console.STAT,l(e),i.length&&a(t,0)}()}),void(t="")):"{"===c||(t["#"]||Object.plain(t))&&(o=t)?o?f.one(o,e,s):void i(t,function(t,r){if(t||!r)return n.say({dam:"!",err:"DAM JSON parse error."},e);f.one(r,e,s)}):void 0}};function l(t){var n=t.batch,e="string"==typeof n;if(e&&(n+="]"),t.batch=t.tail=null,n&&!(e?3>n.length:!n.length)){if(!e)try{n=1===n.length?n[0]:JSON.stringify(n)}catch(i){return r.log("DAM JSON stringify error",i)}n&&p(n,t)}}function p(t,e){try{var r=e.wire;e.say?e.say(t):r.send&&r.send(t),n.say.d+=t.length||0,++n.say.c}catch(i){(e.queue=e.queue||[]).push(t)}}return f.one=function(e,r,i){var o,a,f,l,p;if(e.DBG&&(e.DBG=p={DBG:e.DBG}),p&&(p.h=i),p&&(p.hp=+new Date),(o=e["#"])||(o=e["#"]=String.random(9)),!((f=c(o))||(a=e["##"])&&(f=e["@"]||e.get&&o)&&s.check(l=f+a))){if((e._=function(){}).via=n.leap=r,(f=e["><"])&&"string"==typeof f&&f.slice(0,99).split(",").forEach(function(t){this[t]=1},e._.yo={}),f=e.dam)return(f=n.hear[f])&&f(e,r,t),void u(o);(f=e.ok)&&(e._.near=f["/"]),i=+new Date,p&&(p.is=i),r.SI=o,u.ed=function(t){o===t&&(u.ed=0,(t=s.s[o])&&(t.via=r,e.get&&(t.it=e)))},t.on("in",n.last=e),p&&(p.hd=+new Date),console.STAT,u(o),l&&u(l),n.leap=n.last=null}},f.c=f.d=0,function(){var t;function i(t,n){var e;return n instanceof Object?(Object.keys(n).sort().forEach(f,{to:e={},on:n}),e):n}function f(t){this.to[t]=this.on[t]}n.hash=function(t,e){var r,s,c;o(t.put,function i(o,u){var f=(s||(s=c=u||"")).slice(0,32768);r=String.hash(f,r),(s=s.slice(32768))?a(i,0):(console.STAT,t._.$put=c,t["##"]=r,n.say(t,e),delete t._.$put)},i)},(n.say=function(i,o){var c;if((c=this)&&(c=c.to)&&c.next&&c.next(i),!i)return!1;var f,h,d,g=i["@"],m=i._||(i._=function(){}),y=i.DBG,v=+new Date;if(m.y=m.y||v,o||y&&(y.y=v),(f=i["#"])||(f=i["#"]=String.random(9)),!t&&u(f),(h=i["##"])||e===i.put||m.via||!g){if(!o&&g&&(o=(c=s.s[g])&&(c.via||(c=c.it)&&(c=c._)&&c.via)||(c=n.last)&&g===c["#"]&&n.leap),!o&&g){if(s.s[g])return;return console.STAT,!1}if(g&&!i.put&&!h&&((s.s[g]||"").it||"")["##"])return!1;if(!o&&n.way)return n.way(i);if(y&&(y.yh=+new Date),d=m.raw){if(y&&(y.yr=+new Date),!o||!o.id){if(!Object.plain(o||r.peers))return!1;v=+new Date,r.puff;var b=r.peers,x=Object.keys(o||r.peers||{});return console.STAT,void function e(){t=1;var r=m.raw;m.raw=d;for(var s,c=0;c<9&&(s=(x||"")[c++]);)(s=b[s]||(o||"")[s])&&n.say(i,s);m.raw=r,t=0,x=x.slice(c),console.STAT,x.length&&(a(e,0),g&&u(g))}()}if(!o.wire&&n.wire&&n.wire(o),f!==o.last){if(o.last=f,o===m.via)return!1;if((c=m.yo)&&(c[o.url]||c[o.pid]||c[o.id]))return!1;if(console.STAT,!t&&g&&u(g),o.batch){if(o.tail=(c=o.tail||0)+d.length,o.tail<=r.pack)return void(o.batch+=(c?",":"")+d);l(o)}o.batch="[",setTimeout(function(){console.STAT,l(o)},r.gap),p(d,o),console.STAT&&o.SI}}else n.raw(i,o)}else n.hash(i,o)}).c=n.say.d=0,n.raw=function(t,i){if(!t)return"";var a,u,f=t._||{};if(u=f.raw)return u;if("string"==typeof t)return t;var l=t["##"],p=t["@"];if(l&&p){if(!f.via&&c(p+l))return!1;if(u=(s.s[p]||"").it){if(l===u["##"])return!1;u["##"]||(u["##"]=l)}}if(!t.dam&&!t["@"]){var h=0,d=[];for(var g in u=r.peers){var m=u[g];if(d.push(m.url||m.pid||m.id),++h>6)break}h>1&&(t["><"]=d.join())}if(t.put&&(u=t.ok)&&(t.ok={"@":(u["@"]||1)-1,"/":u["/"]==t._.near?n.near:u["/"]}),a=f.$put)return u={},Object.keys(t).forEach(function(n){u[n]=t[n]}),u.put=":])([:",void o(u,function(t,n){t||(u=n.indexOf('"put":":])([:"'),y(e,n=n.slice(0,u+6)+a+n.slice(u+14)),console.STAT)});function y(e,r){e||(f.raw=r,n.say(t,i))}o(t,y)}}(),n.near=0,n.hi=function(e){var i;e.wire?(e.id?r.peers[e.url||e.id]=e:(i=e.id=e.id||e.url||String.random(9),n.say({dam:"?",pid:t.opt.pid},r.peers[i]=e),delete s.s[e.last]),e.met||(n.near++,e.met=+new Date,t.on("hi",e)),i=e.queue,e.queue=[],setTimeout.each(i||[],function(t){p(t,e)},0,9)):n.wire(e.length&&{url:e,id:e}||e)},n.bye=function(e){e.met&&--n.near,delete e.met,t.on("bye",e);var r=+new Date;r-=e.met||r,n.bye.time=((n.bye.time||r)+r)/2},n.hear["!"]=function(t,n){r.log("Error:",t.err)},n.hear["?"]=function(t,e){t.pid&&(e.pid||(e.pid=t.pid),t["@"])||(n.say({dam:"?",pid:r.pid,"@":t["#"]},e),delete s.s[e.last])},n.hear.mob=function(t,e){if(t.peers){var r=Object.keys(t.peers),i=r[Math.random()*r.length|0];i&&(n.bye(e),n.hi(i))}},t.on("create",function(t){t.opt.pid=t.opt.pid||String.random(9),this.to.next(t),t.on("out",n.say)}),t.on("bye",function(t,n){t=r.peers[t.id||t]||t,this.to.next(t),t.bye?t.bye():(n=t.wire)&&n.close&&n.close(),delete r.peers[t.id],t.wire=null}),t.on("bye",function(t,e){this.to.next(t),(e=console.STAT)&&(e.peers=n.near),(e=t.url)&&setTimeout(function(){},r.lack||9e3)}),t.on("hi",function(e,i){if(this.to.next(e),(i=console.STAT)&&(i.peers=n.near),!r.super){var o=Object.keys(t.next||"");o.length>9999&&console.SUBS,setTimeout.each(o,function(i){var o=t.next[i];r.super||(o.ask||"")[""]?n.say({get:{"#":i}},e):setTimeout.each(Object.keys(o.ask||""),function(r){r&&n.say({"##":String.hash((t.graph[i]||"")[r]),get:{"#":i,".":r}},e)})})}}),n}}catch(a){}})(n,"./mesh"),n(function(t){var e=n("./index");e.Mesh=n("./mesh"),e.on("opt",function(t){if(this.to.next(t),!t.once){var n=t.opt;if(!1!==n.WebSocket){var r=e.window||{},i=n.WebSocket||r.WebSocket||r.webkitWebSocket||r.mozWebSocket;if(i){n.WebSocket=i;var o=n.mesh=n.mesh||e.Mesh(t);o.wire||n.wire,o.wire=n.wire=c,setTimeout(function(){!n.super&&t.on("out",{dam:"hi"})},1);var a=1998,s=""+void 0!=typeof document&&document}}}function c(t){try{if(!t||!t.url)return r&&r(t);var e=t.url.replace(/^http/,"ws"),r=t.wire=new n.WebSocket(e);return r.onclose=function(){u(t),n.mesh.bye(t)},r.onerror=function(n){u(t)},r.onopen=function(){n.mesh.hi(t)},r.onmessage=function(e){e&&n.mesh.hear(e.data||e,t)},r}catch(i){n.mesh.bye(t)}}function u(t){clearTimeout(t.defer),n.peers[t.url]&&(s&&t.retry<=0||(t.retry=(t.retry||n.retry+1||60)-(-t.tried+(t.tried=+new Date)<4*a?1:0),t.defer=setTimeout(function n(){if(s&&s.hidden)return setTimeout(n,a);c(t)},a)))}})})(n,"./websocket"),n(function(t){if("undefined"!=typeof Gun){var n;try{n=(Gun.window||function(){}).localStorage}catch(r){}n||(Gun.log("Warning: No localStorage exists to persist data to!"),n={setItem:function(t,n){this[t]=n},removeItem:function(t){delete this[t]},getItem:function(t){return this[t]}});var e=JSON.stringifyAsync||function(t,n,e,i){try{n(void 0,JSON.stringify(t,e,i))}catch(r){n(r)}};Gun.on("create",function t(i){this.to.next(i);var o=i.opt;i.graph;var a,s,c,u,f=[];if(!1!==o.localStorage){o.prefix=o.file||"gun/";try{a=t[o.prefix]=t[o.prefix]||JSON.parse(c=n.getItem(o.prefix))||{}}catch(r){a=t[o.prefix]={}}c=(c||"").length,i.on("get",function(t){this.to.next(t);var n,e,r,i=t.get;i&&(n=i["#"])&&((e=a[n]||void 0)&&(r=i["."])&&!Object.plain(r)&&(e=Gun.state.ify({},r,Gun.state.is(e,r),e[r],n)),Gun.on.get.ack(t,e))}),i.on("put",function(t){this.to.next(t);var n=t.put,e=n["#"],r=n["."],o=t["#"],p=t.ok||"";(i.next||"")[e]&&(a[e]=Gun.state.ify(a[e],r,n[">"],n[":"],e),u&&c>4999880?i.on("in",{"@":o,err:"localStorage max!"}):(t["@"]||t._.via&&!(Math.random()<p["@"]/p["/"])||f.push(o),s||(s=setTimeout(l,9+c/333))))})}function l(){if(f.length||!((setTimeout.turn||"").s||"").length){var t=f;clearTimeout(s),s=!1,f=[],e(a,function(e,s){try{!e&&n.setItem(o.prefix,s)}catch(r){e=u=r||"localStorage failure"}e&&(Gun.log(e+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),i.on("localStorage:error",{err:e,get:o.prefix,put:a})),c=s.length,setTimeout.each(t,function(t){i.on("in",{"@":t,err:e,ok:0})},0,99)})}else setTimeout(l,99)}})}})(n,"./localStorage")}(),function(){if(""+$!=typeof Gun){var t=Gun;t.fn=t.fn||{is:function(t){return!!t&&"function"==typeof t}},t.bi=t.bi||{is:function(t){return t instanceof Boolean||"boolean"==typeof t}},t.num=t.num||{is:function(t){return!e(t)&&(t-parseFloat(t)+1>=0||1/0===t||-1/0===t)}},t.text=t.text||{is:function(t){return"string"==typeof t}},t.text.ify=t.text.ify||function(n){return t.text.is(n)?n:"undefined"!=typeof JSON?JSON.stringify(n):n&&n.toString?n.toString():n},t.text.random=t.text.random||function(t,n){var e="";for(t=t||24,n=n||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";t>0;)e+=n.charAt(Math.floor(Math.random()*n.length)),t--;return e},t.text.match=t.text.match||function(t,n){var e,r;return"string"==typeof t&&("string"==typeof n&&(n={"=":n}),t===(e=(n=n||{})["="]||n["*"]||n[">"]||n["<"])||r===n["="]&&(e=n["*"]||n[">"]||n["<"],t.slice(0,(e||"").length)===e||r===n["*"]&&(r!==n[">"]&&r!==n["<"]?t>=n[">"]&&t<=n["<"]:r!==n[">"]&&t>=n[">"]||r!==n["<"]&&t<=n["<"])))},t.text.hash=t.text.hash||function(t,n){if("string"==typeof t){if(n=n||0,!t.length)return n;for(var e=0,r=t.length;e<r;++e)n=(n<<5)-n+t.charCodeAt(e),n|=0;return n}},t.list=t.list||{is:function(t){return t instanceof Array}},t.list.slit=t.list.slit||Array.prototype.slice,t.list.sort=t.list.sort||function(t){return function(n,e){return n&&e?(n=n[t])<(e=e[t])?-1:n>e?1:0:0}},t.list.map=t.list.map||function(t,n,e){return o(t,n,e)},t.list.index=1,t.obj=t.boj||{is:function(t){return!!t&&(t instanceof Object&&t.constructor===Object||"Object"===Object.prototype.toString.call(t).match(/^\[object (\w+)\]$/)[1])}},t.obj.put=t.obj.put||function(t,n,e){return(t||{})[n]=e,t},t.obj.has=t.obj.has||function(t,n){return t&&Object.prototype.hasOwnProperty.call(t,n)},t.obj.del=t.obj.del||function(t,n){if(t)return t[n]=null,delete t[n],t},t.obj.as=t.obj.as||function(t,n,e,r){return t[n]=t[n]||(r===e?{}:e)},t.obj.ify=t.obj.ify||function(t){if(r(t))return t;try{t=JSON.parse(t)}catch(n){t={}}return t},function(){function n(t,n){i(this,n)&&void 0!==this[n]||(this[n]=t)}t.obj.to=t.obj.to||function(t,e){return o(t,n,e=e||{}),e}}(),t.obj.copy=t.obj.copy||function(t){return t?JSON.parse(JSON.stringify(t)):t},function(){function n(t,n){var e=this.n;if(!e||!(n===e||r(e)&&i(e,n)))return void 0!==n||void 0}t.obj.empty=t.obj.empty||function(t,e){return!t||!o(t,n,{n:e})}}(),function(){function n(t,e){if(2===arguments.length)return n.r=n.r||{},void(n.r[t]=e);n.r=n.r||[],n.r.push(t)}var o,a=Object.keys;Object.keys=Object.keys||function(t){return o(t,function(t,n,e){e(n)})},t.obj.map=o=t.obj.map||function(o,s,c){var u,f,l,p,h,d=0,g="function"==typeof s;if(n.r=u,a&&r(o)&&(p=a(o),h=!0),c=c||{},e(o)||p)for(f=(p||o).length;d<f;d++){var m=d+t.list.index;if(g){if((l=h?s.call(c,o[p[d]],p[d],n):s.call(c,o[d],m,n))!==u)return l}else if(s===o[h?p[d]:d])return p?p[d]:m}else for(d in o)if(g){if(i(o,d)&&(l=c?s.call(c,o[d],d,n):s(o[d],d,n))!==u)return l}else if(s===o[d])return d;return g?n.r:t.list.index?0:-1}}(),t.time=t.time||{},t.time.is=t.time.is||function(t){return t?t instanceof Date:+(new Date).getTime()};var n=t.fn.is,e=t.list.is,r=(x=t.obj).is,i=x.has,o=x.map,a={is:function(t){return t!==$&&(null===t||t!==1/0&&(!!(f(t)||c(t)||u(t))||a.link.is(t)||!1))}};a.link=a.rel={_:"#"},function(){function t(t,n){var e=this;return e.id?e.id=!1:n==s&&f(t)?void(e.id=t):e.id=!1}a.link.is=function(n){if(n&&n[s]&&!n._&&r(n)){var e={};if(o(n,t,e),e.id)return e.id}return!1}}(),a.link.ify=function(t){return l({},s,t)},t.obj.has._=".";var s=a.link._,c=t.bi.is,u=t.num.is,f=t.text.is,l=(r=(x=t.obj).is,x.put);o=x.map,t.val=t.val||a;var p={_:"_",soul:function(t,n){return t&&t._&&t._[n||g]}};p.soul.ify=function(t,n){return n="string"==typeof n?{soul:n}:n||{},(t=t||{})._=t._||{},t._[g]=n.soul||t._[g]||d(),t},p.soul._=a.link._,function(){function t(t,n){if(n!==p._)return!a.is(t)||void(this.cb&&this.cb.call(this.as,t,n,this.n,this.s))}p.is=function(n,e,i){var a;return!!r(n)&&!!(a=p.soul(n))&&!o(n,t,{as:i,cb:e,s:a,n:n})}}(),function(){function t(t,n){var e,r=this.o;r.map?void 0===(e=r.map.call(this.as,t,""+n,r.node))?h(r.node,n):r.node&&(r.node[n]=e):a.is(t)&&(r.node[n]=t)}p.ify=function(n,e,r){return e?"string"==typeof e?e={soul:e}:"function"==typeof e&&(e={map:e}):e={},e.map&&(e.node=e.map.call(r,n,$,e.node||{})),(e.node=p.soul.ify(e.node||{},e))&&o(n,t,{o:e,as:r}),e.node}}(),r=(x=t.obj).is;var h=x.del,d=(o=x.map,t.text.random),g=p.soul._;t.node=t.node||p;var m=t.state;m.lex=function(){return m().toString(36).replace(".","")},m.to=function(t,n,e){var i=(t||{})[n];return r(i)&&(i=y(i)),m.ify(e,n,m.is(t,n),i,p.soul(t))},function(){function t(t,n){v!==n&&m.ify(this.o,n,this.s)}m.map=function(e,a,s){var c,f=r(f=e||a)?f:null;return e=n(e=e||a)?e:null,f&&!e?(a=u(a)?a:m(),f[v]=f[v]||{},o(f,t,{o:f,s:a}),f):(s=s||r(a)?a:c,a=u(a)?a:m(),function(n,r,o,u){if(!e)return t.call({o:o,s:a},n,r),n;e.call(s||this||{},n,r,o,u),i(o,r)&&c===o[r]||t.call({o:o,s:a},n,r)})}}(),(x=t.obj).as,i=x.has,r=x.is,o=x.map;var y=x.copy,v=(u=t.num.is,n=t.fn.is,p._),b={};!function(){function t(t,e){if(!t||e!==p.soul(t)||!p.is(t,this.fn,this.as))return!0;this.cb&&(n.n=t,n.as=this.as,this.cb.call(n.as,t,e,n))}function n(t){t&&p.is(n.n,t,n.as)}b.is=function(n,e,i,a){return!(!n||!r(n)||k(n)||o(n,t,{cb:e,fn:i,as:a}))}}(),function(){function n(t,n){var r;return(r=function(t,n){for(var e,r=t.seen,i=r.length;i--;)if(e=r[i],n.obj===e.obj)return e;r.push(n)}(t,n))?r:(n.env=t,n.soul=o,p.ify(n.obj,e,n)&&(n.link=n.link||a.link.ify(p.soul(n.node)),n.obj!==t.shell&&(t.graph[a.link.is(n.link)]=n.node)),n)}function e(t,e,r){var o,c,u=this,f=u.env;if(p._===e&&i(t,a.link._))return r._;if(o=s(t,e,r,u,f)){if(e||(u.node=u.node||r||{},i(t,p._)&&p.soul(t)&&(u.node._=y(t._)),u.node=p.soul.ify(u.node,a.link.is(u.link)),u.link=u.link||a.link.ify(p.soul(u.node))),(c=f.map)&&(c.call(f.as||{},t,e,r,u),i(r,e))){if(t=r[e],$===t)return void h(r,e);if(!(o=s(t,e,r,u,f)))return}if(!e)return u.node;if(!0===o)return t;if((c=n(f,{obj:t,path:u.path.concat(e)})).node)return c.link}}function o(t){var n=this,e=a.link.is(n.link),r=n.env.graph;n.link=n.link||a.link.ify(t),n.link[a.link._]=t,n.node&&n.node[p._]&&(n.node[p._][a.link._]=t),i(r,e)&&(r[t]=r[e],h(r,e))}function s(n,e,i,o,c){var u;return!!a.is(n)||(r(n)?1:(u=c.invalid)?s(n=u.call(c.as||{},n,e,i),e,i,o,c):(c.err="Invalid value at '"+o.path.concat(e).join(".")+"'!",void(t.list.is(n)&&(c.err+=" Use `.set(item)` instead of an Array."))))}b.ify=function(t,e,r){var i={path:[],obj:t};return e?"string"==typeof e?e={soul:e}:"function"==typeof e&&(e.map=e):e={},"string"==typeof r&&(e.soul=e.soul||r,r=$),e.soul&&(i.link=a.link.ify(e.soul)),e.shell=(r||{}).shell,e.graph=e.graph||{},e.seen=e.seen||[],e.as=e.as||r,n(e,i),e.root=i.node,e.graph}}(),b.node=function(t){var n=p.soul(t);if(n)return l({},n,t)},function(){function t(t,n){var e,r;if(p._!==n)(e=a.link.is(t))?(r=this.opt.seen[e])?this.obj[n]=r:this.obj[n]=this.opt.seen[e]=b.to(this.graph,e,this.opt):this.obj[n]=t;else{if(k(t,a.link._))return;this.obj[n]=y(t)}}b.to=function(n,e,r){if(n){var i={};return r=r||{seen:{}},o(n[e],t,{obj:i,graph:n,opt:r}),i}}}(),n=t.fn.is,r=(x=t.obj).is,h=x.del,i=x.has;var x,$,k=x.empty;l=x.put,o=x.map,y=x.copy,t.graph=t.graph||b}}()),c.exports;var t}function f(){return s?a:(s=1,a=u())}var l=Object.create,p=Object.defineProperty,h=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyNames,g=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty,y=(t,n)=>()=>(n||t((n={exports:{}}).exports,n),n.exports),v=(t,n,e)=>(e=null!=t?l(g(t)):{},((t,n,e,r)=>{if(n&&"object"==typeof n||"function"==typeof n)for(let i of d(n))!m.call(t,i)&&i!==e&&p(t,i,{get:()=>n[i],enumerable:!(r=h(n,i))||r.enumerable});return t})(p(e,"default",{value:t,enumerable:!0}),t)),b=y(t=>{var n;n=function(t){t.version="0.3.0";var n=function(){for(var t=0,n=new Array(256),e=0;256!=e;++e)t=1&(t=1&(t=1&(t=1&(t=1&(t=1&(t=1&(t=1&(t=e)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1)?-306674912^t>>>1:t>>>1,n[e]=t;return typeof Int32Array<"u"?new Int32Array(n):n}(),e=typeof Buffer<"u";function r(t){for(var e=-1,r=0,i=t.length-7;r<i;)e=(e=(e=(e=(e=(e=(e=(e=e>>>8^n[255&(e^t[r++])])>>>8^n[255&(e^t[r++])])>>>8^n[255&(e^t[r++])])>>>8^n[255&(e^t[r++])])>>>8^n[255&(e^t[r++])])>>>8^n[255&(e^t[r++])])>>>8^n[255&(e^t[r++])])>>>8^n[255&(e^t[r++])];for(;r<i+7;)e=e>>>8^n[255&(e^t[r++])];return-1^e}t.table=n,t.bstr=function(t){if(t.length>32768&&e)return r(new Buffer(t));for(var i=-1,o=t.length-1,a=0;a<o;)i=n[255&(i^t.charCodeAt(a++))]^i>>>8,i=n[255&(i^t.charCodeAt(a++))]^i>>>8;return a===o&&(i=i>>>8^n[255&(i^t.charCodeAt(a))]),-1^i},t.buf=function(t){if(t.length>1e4)return r(t);for(var e=-1,i=0,o=t.length-3;i<o;)e=(e=(e=(e=e>>>8^n[255&(e^t[i++])])>>>8^n[255&(e^t[i++])])>>>8^n[255&(e^t[i++])])>>>8^n[255&(e^t[i++])];for(;i<o+3;)e=e>>>8^n[255&(e^t[i++])];return-1^e},t.str=function(t){for(var e,r,i=-1,o=0,a=t.length;o<a;)(e=t.charCodeAt(o++))<128?i=i>>>8^n[255&(i^e)]:e<2048?i=(i=i>>>8^n[255&(i^(192|e>>6&31))])>>>8^n[255&(i^(128|63&e))]:e>=55296&&e<57344?(e=64+(1023&e),r=1023&t.charCodeAt(o++),i=(i=(i=(i=i>>>8^n[255&(i^(240|e>>8&7))])>>>8^n[255&(i^(128|e>>2&63))])>>>8^n[255&(i^(128|r>>6&15|3&e))])>>>8^n[255&(i^(128|63&r))]):i=(i=(i=i>>>8^n[255&(i^(224|e>>12&15))])>>>8^n[255&(i^(128|e>>6&63))])>>>8^n[255&(i^(128|63&e))];return-1^i}},typeof DO_NOT_EXPORT_CRC>"u"?"object"==typeof t?n(t):"function"==typeof define&&define.amd?define(function(){var t={};return n(t),t}):n({}):n({})}),x=y((t,n)=>{var e=b();n.exports=function(t){if(137!==t[0])throw new Error("Invalid .png file header");if(80!==t[1])throw new Error("Invalid .png file header");if(78!==t[2])throw new Error("Invalid .png file header");if(71!==t[3])throw new Error("Invalid .png file header");if(13!==t[4])throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(10!==t[5])throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(26!==t[6])throw new Error("Invalid .png file header");if(10!==t[7])throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");for(var n=!1,a=[],s=8;s<t.length;){r[3]=t[s++],r[2]=t[s++],r[1]=t[s++],r[0]=t[s++];var c=o[0]+4,u=new Uint8Array(c);u[0]=t[s++],u[1]=t[s++],u[2]=t[s++],u[3]=t[s++];var f=String.fromCharCode(u[0])+String.fromCharCode(u[1])+String.fromCharCode(u[2])+String.fromCharCode(u[3]);if(!a.length&&"IHDR"!==f)throw new Error("IHDR header missing");if("IEND"===f){n=!0,a.push({name:f,data:new Uint8Array(0)});break}for(var l=4;l<c;l++)u[l]=t[s++];r[3]=t[s++],r[2]=t[s++],r[1]=t[s++],r[0]=t[s++];var p=i[0];if(e.buf(u)!==p)throw new Error("CRC values for "+f+" header do not match, PNG file is likely corrupted");var h=new Uint8Array(u.buffer.slice(4));a.push({name:f,data:h})}if(!n)throw new Error(".png file ended prematurely: no IEND header was found");return a};var r=new Uint8Array(4),i=new Int32Array(r.buffer),o=new Uint32Array(r.buffer)}),$=y((t,n)=>{n.exports=function(t,n,e){var r=[],i=t.length;if(0===i)return r;var o=n<0?Math.max(0,n+i):n||0;for(void 0!==e&&(i=e<0?e+i:e);i-- >o;)r[i-o]=t[i];return r}}),k=y((t,n)=>{var e=$(),r=b();n.exports=function(t){var n,s=8,c=s;for(n=0;n<t.length;n++)s+=t[n].data.length,s+=12;var u=new Uint8Array(s);for(u[0]=137,u[1]=80,u[2]=78,u[3]=71,u[4]=13,u[5]=10,u[6]=26,u[7]=10,n=0;n<t.length;n++){var f=t[n],l=f.name,p=f.data,h=p.length,d=[l.charCodeAt(0),l.charCodeAt(1),l.charCodeAt(2),l.charCodeAt(3)];a[0]=h,u[c++]=i[3],u[c++]=i[2],u[c++]=i[1],u[c++]=i[0],u[c++]=d[0],u[c++]=d[1],u[c++]=d[2],u[c++]=d[3];for(var g=0;g<h;)u[c++]=p[g++];var m=d.concat(e(p)),y=r.buf(m);o[0]=y,u[c++]=i[3],u[c++]=i[2],u[c++]=i[1],u[c++]=i[0]}return u};var i=new Uint8Array(4),o=new Int32Array(i.buffer),a=new Uint32Array(i.buffer)}),w=y((t,n)=>{n.exports=function(t,n){if(t=String(t),n=String(n),!/^[\x00-\xFF]+$/.test(t)||!/^[\x00-\xFF]+$/.test(n))throw new Error("Only Latin-1 characters are permitted in PNG tEXt chunks. You might want to consider base64 encoding and/or zEXt compression");if(t.length>=80)throw new Error('Keyword "'+t+'" is longer than the 79-character limit imposed by the PNG specification');for(var e,r=t.length+n.length+1,i=new Uint8Array(r),o=0,a=0;a<t.length;a++){if(!(e=t.charCodeAt(a)))throw new Error("0x00 character is not permitted in tEXt keywords");i[o++]=e}i[o++]=0;for(var s=0;s<n.length;s++){if(!(e=n.charCodeAt(s)))throw new Error("0x00 character is not permitted in tEXt content");i[o++]=e}return{name:"tEXt",data:i}}}),_=y((t,n)=>{n.exports=function(t){t.data&&t.name&&(t=t.data);for(var n=!0,e="",r="",i=0;i<t.length;i++){var o=t[i];if(n)o?r+=String.fromCharCode(o):n=!1;else{if(!o)throw new Error("Invalid NULL character found. 0x00 character is not permitted in tEXt content");e+=String.fromCharCode(o)}}return{keyword:r,text:e}}}),j=y(t=>{t.encode=w(),t.decode=_()}),S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function A(t){let n=t.split("."),e=n.map(t=>function(t){let n=S.split(""),e=[],r=0;for(let i of t)e[r++]=n.indexOf(i)/64;return e}(t)),r=e.map(t=>t[42]),i=e.map(t=>t.reduce((t,n)=>t+n)/t.length),o=n.map(t=>function(t){return t.split("").reduce((t,n)=>64*t+S.indexOf(n),0)}(t)%360),a=n.map((t,n)=>`hsl(${o[n]} ${100*r[n]}% ${100*i[n]}%)`);return{finals:r,decoded:e,angles:o,averages:i,colors:a}}function O(t,n=3){return[...Array(Math.ceil(t.length/n))].map(()=>t.splice(0,n))}var T=v(x()),E=v(k()),M=v(j()),D=t(null);function C(t,n){try{let e=function(t){try{let n=t.toDataURL("image/png").split(",")[1],e=atob(n),r=new Uint8Array(e.length);for(let t=0;t<e.length;t++)r[t]=e.charCodeAt(t);return r}catch(n){return D.value="Failed to convert canvas to buffer: "+n.message,null}}(t);if(!e)return null;let r=(0,T.default)(e);return r.splice(-1,0,M.default.encode("message",JSON.stringify(n))),(0,E.default)(r)}catch(e){return D.value="Failed to embed data: "+e.message,null}}function I(t,n,e,r){O(t,14).forEach(t=>{if(14===t.length){let[i,o,a,s,c,u,f,l,p,h,d,g,m,y]=t,v=e/8+a*e*(7/8),b=n.createLinearGradient(i*e+v*l,0,i*e+v*m,e);b.addColorStop(0,r?`color(display-p3 ${s} ${c} ${u} / ${f})`:`rgba(${255*s}, ${255*c}, ${255*u}, ${f})`),b.addColorStop(1,r?`color(display-p3 ${p} ${h} ${d} / ${g})`:`rgba(${255*p}, ${255*h}, ${255*d}, ${g})`),n.fillStyle=b,n.translate(i*e,o*e),n.rotate(y*Math.PI),n.fillRect(-v/2,-v/2,v,v),n.setTransform(1,0,0,1,0,0)}})}function z(t,n,e,r,i){O(t,7).forEach(t=>{if(7===t.length){let[o,a,s,c,u,f,l]=t;n.beginPath(),n.arc(e/2+o*e/2,a*e,s*r,0,2*Math.PI),n.fillStyle=i?`color(display-p3 ${c} ${u} ${f} / ${l})`:`rgba(${255*c}, ${255*u}, ${255*f}, ${l})`,n.closePath(),n.fill()}})}function G({pub:t,size:n=200,dark:e=!1,draw:r="circles",reflect:i=!0,round:o=!0,embed:a=!0,svg:s}={}){let{decoded:c,finals:u,averages:f}=A(t),l=`\n      <linearGradient id="bg" x1="0" y1="0" x2="0" y2="1">\n        <stop offset="0%" stop-color="hsla(0,0%,${(e?0:70)+30*u[0]}%)"/>\n        <stop offset="100%" stop-color="hsla(0,0%,${(e?0:70)+30*u[1]}%)"/>\n      </linearGradient>\n    `,p=(t,e=!1)=>O(t,14).map(t=>{if(14!==t.length)return"";let[r,i,o,a,c,u,f,l,p,h,d,g,m,y]=t,v=n/8+o*n*(7/8),b=`gradient-${r}-${i}-${e?"2":"1"}`,x=r*n,$=i*n;return`\n          <defs>\n            <linearGradient id="${b}" x1="${l}" y1="0" x2="${m}" y2="1">\n              <stop offset="0%" stop-color="color(display-p3 ${a} ${c} ${u} / ${f})"/>\n              <stop offset="100%" stop-color="color(display-p3 ${p} ${h} ${d} / ${g})"/>\n            </linearGradient>\n          </defs>\n          <g ${"interactive"===s?`class="interactive-square" data-cx="${x}" data-cy="${$}" data-r="${v}" data-angle="${180*y}" data-opacity="${(f+g)/2}"`:""} transform="translate(${x} ${$}) rotate(${180*y})">\n            <rect \n              x="${-v/2}" y="${-v/2}" \n              width="${v}" height="${v}"\n              fill="url(#${b})"\n              style="${e?"mix-blend-mode:color-burn;":"filter:blur(20px);"}"\n            />\n          </g>\n        `}).join(""),h=(t,e,r=!1)=>O(t,7).map(t=>{if(7!==t.length)return"";let[o,a,c,u,f,l,p]=t,h=n/2+o*n/2,d=a*n,g=c*e;return`\n          <circle \n            ${"interactive"===s?`class="interactive-circle" data-cx="${h}" data-cy="${d}" data-opacity="${p}"`:""}\n            cx="${h}" cy="${d}" r="${g}"\n            fill="color(display-p3 ${u} ${f} ${l} / ${p})"\n\n            style="${r?"mix-blend-mode:multiply;":""}"\n          />\n          ${i?`\n          <circle \n            cx="${n-h}" cy="${d}" r="${g}"\n            fill="color(display-p3 ${u} ${f} ${l} / ${p})"\n\n            style="${r?"mix-blend-mode:multiply;":""}"\n          />`:""}\n        `}).join(""),d=o?`\n      <defs>\n        <clipPath id="circle-mask">\n          <circle cx="${n/2}" cy="${n/2}" r="${n/2}" />\n        </clipPath>\n      </defs>\n    `:"",g="interactive"===s?function({size:t=300,reflect:n=!0,follow:e=!0,finals:r=[.5,.5],averages:i=[.5,.5],breathVert:o=.03}={}){return`\n    <script type="text/javascript"><![CDATA[\n      // Compact state & precomputed constants\n      const s = {\n        e: [], // elements\n        p: { x: null, y: null, tx: null, ty: null, a: false, lt: 0, lit: 0 }, // pointer state\n        r: null, // rect\n        a: false, // pulse active\n        pt: 0, // pulse time\n        pv: 0, // pulse value\n        t: 0 // time\n      },\n      c = {\n        sz: ${t},\n        cx: ${t/2},\n        cy: ${t/2},\n        pz: ${t} * 1.2,\n        bz: ${t} * 0.4 * ${r[1]},\n        pr: ${t} * (0.5 + ${r[0]}/4),\n        mv: (0.1 + 0.05*${i[0]}) * Math.max(0.8, Math.min(4.4, 200/${t})),\n        bs: 0.1 * Math.max(0.8, Math.min(1.4, 200/${t})),\n        bv: ${o} * Math.max(0.8, Math.min(1.4, 200/${t})),\n        bd: 4500 + ${i[0]}*1000,\n        pa: 0.6 * Math.max(0.8, Math.min(1.4, 200/${t})),\n        pr: 200,\n        pf: 700,\n        rf: ${e},\n        d: 900,\n        td: 1500000,\n        pp: 0.5+ 0.5*${i[1]}\n      };\n\n      // Init using IIFE\n      (() => {\n        const svg = document.currentScript?.closest('svg');\n        if (!svg) return;\n        \n        // Update rect and get element collections\n        const ur = () => s.r = svg.getBoundingClientRect();\n        ur();\n        \n        // Cache elements for better performance\n        s.e = [\n          ...Array.from(svg.querySelectorAll('.interactive-circle')).map(el => {\n            const x = +el.getAttribute('data-cx');\n            const y = +el.getAttribute('data-cy');\n            const r = +el.getAttribute('r');\n            const o = +el.getAttribute('data-opacity');\n            const m = Math.pow(r / (c.sz * 0.05), 0.7) * o;\n            const mr = el.nextElementSibling && \n                      el.nextElementSibling.getAttribute('cx') === (c.sz - x).toString() ?\n                      el.nextElementSibling : null;\n            \n            return {\n              el, t: 'c',\n              x, y, r,\n              cx: x, cy: y,\n              m, mr,\n              o: Math.random() * Math.PI * 2\n            };\n          }),\n          ...Array.from(svg.querySelectorAll('.interactive-square')).map(el => {\n            const x = +el.getAttribute('data-cx');\n            const y = +el.getAttribute('data-cy');\n            const r = +el.getAttribute('data-r');\n            const o = +el.getAttribute('data-opacity');\n            const a = +el.getAttribute('data-angle') + (Math.random() * 20 - 10);\n            \n            return {\n              el, t: 's',\n              x, y, z: c.bz, r: a,\n              cx: x, cy: y, cz: c.bz, cr: a, cs: 1,\n              m: Math.pow((r / c.sz), 1.5) * o,\n              o: Math.random() * Math.PI * 2\n            };\n          })\n        ];\n        \n        // Initial transform for squares\n        s.e.filter(el => el.t === 's').forEach(setTransform);\n        \n        // Helper functions for event handling\n        const gc = e => ({ x: (e.touches?.[0] || e.changedTouches?.[0] || e).clientX, \n                           y: (e.touches?.[0] || e.changedTouches?.[0] || e).clientY });\n        \n        const inBounds = (x, y) => {\n          const { left, top, width, height } = s.r || {};\n          return x >= left && x <= left + width && y >= top && y <= top + height;\n        };\n        \n        // Event handlers\n        const up = e => {\n          if (!s.r) ur();\n          const { left, top, width, height } = s.r;\n          const { x, y } = gc(e);\n          \n          if (!inBounds(x, y) && !e.type.startsWith('touch')) {\n            if (s.p.a) pl(false);\n            return;\n          }\n          \n          // Calculate relative position\n          const tx = ((x - left) / width) * c.sz;\n          const ty = ((y - top) / height) * c.sz;\n          \n          // Init/update target position\n          if (s.p.tx === null) {\n            s.p.tx = tx;\n            s.p.ty = ty;\n          } else {\n            s.p.tx = tx;\n            s.p.ty = ty;\n            \n            // Handle reappearance after inactivity\n            if (!s.p.a && performance.now() - s.p.lt > 100) {\n              s.p.x = tx;\n              s.p.y = ty;\n            }\n          }\n          \n          // Initialize actual position if first interaction\n          if (s.p.x === null) {\n            s.p.x = s.p.tx;\n            s.p.y = s.p.ty;\n          }\n          \n          s.p.a = true;\n          s.p.lt = performance.now();\n        };\n        \n        const pd = e => {\n          up(e);\n          s.a = true;\n          s.pt = performance.now();\n          if (e.type === 'touchstart') e.preventDefault();\n        };\n        \n        const pu = e => {\n          s.a = false;\n          s.pt = performance.now();\n          \n          if (e.type === 'touchend' || e.type === 'touchcancel') {\n            pl(true);\n          }\n        };\n        \n        const pl = (immediate = false) => {\n          s.p.a = false;\n          s.p.lit = performance.now();\n          s.a = false;\n          s.pt = s.p.lit;\n          \n          if (immediate) {\n            s.p.tx = s.p.x = null;\n            s.p.ty = s.p.y = null;\n          }\n        };\n        \n        // Event listeners\n        window.addEventListener('resize', ur, { passive: true });\n        svg.addEventListener('pointermove', up, { passive: true });\n        svg.addEventListener('pointerenter', up, { passive: true });\n        svg.addEventListener('pointerleave', pl, { passive: true });\n        svg.addEventListener('pointerdown', pd, { passive: false });\n        window.addEventListener('pointerup', pu, { passive: true });\n        window.addEventListener('pointercancel', pu, { passive: true });\n        \n        // Start animation\n        requestAnimationFrame(animate);\n        \n        // Setup auto-cleanup\n        if (document.currentScript?.parentNode) {\n          const cleanup = () => {\n            window.removeEventListener('resize', ur);\n            svg.removeEventListener('pointermove', up);\n            svg.removeEventListener('pointerenter', up);\n            svg.removeEventListener('pointerleave', pl);\n            svg.removeEventListener('pointerdown', pd);\n            window.removeEventListener('pointerup', pu);\n            window.removeEventListener('pointercancel', pu);\n            s.e = [];\n          };\n          \n          new MutationObserver(mutations => {\n            mutations.forEach(m => {\n              if (m.removedNodes) {\n                m.removedNodes.forEach(n => {\n                  if (n === document.currentScript) {\n                    cleanup();\n                    observer.disconnect();\n                  }\n                });\n              }\n            });\n          }).observe(document.currentScript.parentNode, { childList: true });\n        }\n      })();\n      \n      // Apply 3D transform to square elements\n      function setTransform(el) {\n        const ps = c.pz / (c.pz + el.cz);\n        const px = c.cx + (el.cx - c.cx) * ps;\n        const py = c.cy + (el.cy - c.cy) * ps;\n        el.el.setAttribute('transform', \n          'translate('+ px+' '+ py+') rotate('+ el.cr+ ') scale(' + ps * el.cs + ')'\n        );\n      }\n      \n      // Calculate effects based on time and pulse\n      function fx(el, t, pv) {\n        const θ = (t % c.bd) / c.bd * Math.PI * 2 + el.o;\n        const w = Math.sin(θ);\n        const mf = 1 - Math.min(0.8, el.m);\n        return {\n          s: (1 + w * c.bs * mf) * (1 + pv * c.pa * Math.pow(mf, 2)),\n          y: w * c.sz * c.bv * mf,\n          p: pv * c.pa * Math.pow(mf, 2)\n        };\n      }\n      \n      // Animation loop\n      function animate(time) {\n        const dt = s.t ? time - s.t : 0;\n        s.t = time;\n        \n        // Handle pointer inactivity\n        if (!s.p.a && s.p.x !== null && time - s.p.lit > c.td) {\n          s.p.x = s.p.y = s.p.tx = s.p.ty = null;\n          s.e.forEach(el => { if (el.ractive) el.ractive = false; });\n        }\n        \n        // Smooth pointer movement\n        if (s.p.a && s.p.tx !== null && s.p.x !== null) {\n          const dx = s.p.tx - s.p.x;\n          const dy = s.p.ty - s.p.y;\n          const dist = Math.sqrt(dx*dx + dy*dy);\n          const factor = dist > c.sz * 0.3 ? 0.2 : c.pp;\n          \n          s.p.x += dx * factor;\n          s.p.y += dy * factor;\n        }\n        \n        // Update pulse\n        s.pv = s.a ? \n          s.pv + (1 - s.pv) * Math.min(1, (time - s.pt) / c.pr) : \n          s.pv * Math.max(0, 1 - (time - s.pt) / c.pf);\n        \n        if (s.pv < 0.001) s.pv = 0;\n        \n        // Process elements\n        const ps = Math.max(0.6, Math.min(1, c.sz / 150));\n        const active = s.p.x !== null;\n        \n        s.e.forEach(el => {\n          const sm = Math.min(dt / c.d, 1) * (el.t === 's' ? 0.3 : 0.1);\n          const effect = fx(el, time, s.pv);\n          \n          if (el.t === 'c') { // Circle\n            let tx = el.x;\n            let ty = el.y + effect.y;\n            \n            if (active) {\n              const dx = s.p.x - el.x;\n              const dy = s.p.y - el.y;\n              const d = Math.sqrt(dx * dx + dy * dy);\n              const mv = c.sz * c.mv * (1 - Math.min(0.8, el.m));\n              const m = Math.min(d, mv) * ps;\n              \n              if (d > 0.1) {\n                tx += m * (dx / d);\n                ty += m * (dy / d);\n              }\n            }\n            \n            // Smooth interpolation\n            const cx_diff = tx - el.cx;\n            const cy_diff = ty - el.cy;\n            const c_dist = Math.sqrt(cx_diff*cx_diff + cy_diff*cy_diff);\n            const c_factor = c_dist > 20 ? 0.15 : 0.1;\n            \n            el.cx += cx_diff * c_factor;\n            el.cy += cy_diff * c_factor;\n            \n            // Apply changes\n            el.el.setAttribute('cx', el.cx);\n            el.el.setAttribute('cy', el.cy);\n            el.el.setAttribute('r', el.r * effect.s);\n            \n            // Handle reflection\n            if (el.mr && ${n}) {\n              // Initialize reflection properties if needed\n              const reflectX = c.sz - el.x;\n              if (!el.rcx) {\n                el.rcx = reflectX;\n                el.rcy = el.y;\n                el.rtx = reflectX;\n                el.rty = el.y;\n                el.ractive = false;\n                el.rest = { x: reflectX, y: el.y };\n              }\n              \n              // Update reflection activity state\n              if (active && !el.ractive && s.p.lt - s.p.lit > 100) {\n                el.ractive = true;\n              } else if (!active && el.ractive && s.p.lit - s.p.lt > 50) {\n                el.ractive = false;\n              }\n              \n              // Set target position based on active state and mode\n              if (!active || !${e}) {\n                el.rtx = c.sz - el.cx;\n                el.rty = el.cy;\n              } else {\n                const rdx = s.p.x - reflectX;\n                const rdy = s.p.y - el.y;\n                const rd = Math.sqrt(rdx * rdx + rdy * rdy);\n                const rmv = c.sz * c.mv * (1 - Math.min(0.8, el.m));\n                const rm = Math.min(rd, rmv) * ps;\n                \n                if (rd > 0.1) {\n                  el.rtx = reflectX + rm * (rdx / rd);\n                  el.rty = el.y + effect.y + rm * (rdy / rd);\n                } else {\n                  el.rtx = reflectX;\n                  el.rty = el.y + effect.y;\n                }\n              }\n              \n              // Return to rest position when inactive\n              if (!active && !s.p.x) {\n                el.rtx = el.rest.x;\n                el.rty = el.rest.y + effect.y;\n              }\n              \n              // Smooth interpolation for reflection\n              const rcx_diff = el.rtx - el.rcx;\n              const rcy_diff = el.rty - el.rcy;\n              const rc_dist = Math.sqrt(rcx_diff*rcx_diff + rcy_diff*rcy_diff);\n              const rc_factor = rc_dist > 30 ? 0.05 : (rc_dist > 10 ? 0.07 : 0.09);\n              \n              el.rcx += rcx_diff * rc_factor;\n              el.rcy += rcy_diff * rc_factor;\n              \n              // Apply reflection position\n              el.mr.setAttribute('cx', el.rcx);\n              el.mr.setAttribute('cy', el.rcy);\n              el.mr.setAttribute('r', el.r * effect.s);\n            }\n          } else if (el.t === 's') { // Square\n            let tx = el.x, ty = el.y + effect.y, tz = c.bz, tr = el.r, ts = 1;\n            \n            if (active) {\n              const dx = s.p.x - el.x;\n              const dy = s.p.y - el.y;\n              const d = Math.sqrt(dx * dx + dy * dy);\n              const mf = 1 - Math.min(0.8, el.m);\n              const mv = c.sz * 0.1 * mf;\n              const m = Math.min(d, mv) * ps;\n              \n              if (d > 0.1) {\n                tx += m * (dx / d);\n                ty += m * (dy / d);\n              }\n              \n              // Apply depth & scale changes\n              const n = Math.min(d / c.pr, 1);\n              const zf = 1 - n * n;\n              tz -= c.bz * zf * mf;\n              ts += zf * 0.3 * mf;\n              tr += Math.sin(d / 100) * 5 * mf;\n            } else {\n              // Idle rotation\n              tr += Math.sin(time / 1500 + el.o) * 3 * (1 - Math.min(0.8, el.m));\n            }\n            \n            // Apply pulse to Z depth\n            tz -= effect.p * c.bz * 0.7 * (1 - Math.min(0.8, el.m));\n            ts *= effect.s;\n            \n            // Smoothing based on distance\n            const sx_diff = tx - el.cx;\n            const sy_diff = ty - el.cy;\n            const s_dist = Math.sqrt(sx_diff*sx_diff + sy_diff*sy_diff);\n            const s_factor = Math.min(1, s_dist > 20 ? sm * 1.5 : sm);\n            \n            // Apply interpolation\n            el.cx += sx_diff * s_factor;\n            el.cy += sy_diff * s_factor;\n            el.cz += (tz - el.cz) * sm;\n            el.cr += (tr - el.cr) * sm;\n            el.cs += (ts - el.cs) * sm;\n            \n            setTransform(el);\n          }\n        });\n        \n        requestAnimationFrame(animate);\n      }\n    ]]><\/script>\n  `}({size:n,reflect:i,finals:u,averages:f}):"",m=`\n      <svg \n        width="${n}" height="${n}" \n        viewBox="0 0 ${n} ${n}" \n        xmlns="http://www.w3.org/2000/svg"\n        style="overflow: visible;"\n        >\n        <defs>${l}</defs>\n        ${d}\n        <g ${o?'clip-path="url(#circle-mask)"':""}>\n          <rect x="${-n}" width="${3*n}" y="${-n}" height="${3*n}" fill="url(#bg)"/>\n          ${"squares"===r?`${p(c[0],!1)}\n             ${p(c[1],!0)}`:`${h(c[0],.42*n)}\n             ${h(c[1],.125*n,!0)}`}\n        </g>\n        ${g}\n      </svg>\n    `;if("interactive"===s)return`data:image/svg+xml,${encodeURIComponent(m.trim())}`;if(a){let n={pub:t};a&&(n.content=a),m=function(t,n){try{let e=`<metadata>\n      <gun-data>${JSON.stringify(n)}</gun-data>\n    </metadata>`;return t.replace("</svg>",`${e}</svg>`)}catch(e){return D.value="Failed to embed data in SVG: "+e.message,null}}(m,n)}return`data:image/svg+xml;base64,${"function"==typeof btoa?btoa(m):Buffer.from(m).toString("base64")}`}var N={};function P({pub:t,size:n=200,dark:e=!1,draw:r="circles",reflect:i=!0,round:o=!0,embed:a=!0,svg:s=!0,p3:c=!0}={}){let u=typeof window<"u"&&typeof document<"u";if(!function(t){return t&&"string"==typeof t&&87===t.length&&2===t.split(".").length}(t))return"";if(s||!u)return G({pub:t,size:n,dark:e,draw:r,reflect:i,round:o,embed:a,svg:s});let f=JSON.stringify(arguments[0]);if(null!=N&&N[f])return N[f];let l=function({pub:t,size:n,dark:e,draw:r,reflect:i,round:o,embed:a,p3:s}){let c=document.createElement("canvas");c.width=c.height=n;let u=c.getContext("2d"),{decoded:f,finals:l}=A(t);if(function({ctx:t,top:n=0,bottom:e=150,size:r=200,dark:i=!1}){let o=t.createLinearGradient(0,0,0,r),a=i?0:70;o.addColorStop(0,`hsl(0,0%,${a+30*n}%)`),o.addColorStop(1,`hsl(0,0%,${a+30*e}%)`),t.fillStyle=o,t.fillRect(0,0,r,r)}({ctx:u,top:l[0],bottom:l[1],size:n,dark:e}),"squares"==r?(u.filter="blur(20px)",I(f[0],u,n,s),u.filter="blur(0px)",u.globalCompositeOperation="color-burn",I(f[1],u,n,s)):(z(f[0],u,n,.42*n,s),u.globalCompositeOperation="multiply",z(f[1],u,n,.125*n,s)),i&&(u.globalCompositeOperation="source-over",u.scale(-1,1),u.translate(-n/2,0),u.drawImage(c,n/2,0,n,n,0,0,n,n),u.setTransform(1,0,0,1,0,0)),o){let t=u.getImageData(0,0,n,n);u.clearRect(0,0,n,n),u.fillStyle=e?"#cccccc":"#ffffff",u.fillRect(0,0,n,n),u.putImageData(t,0,0),u.globalCompositeOperation="destination-in",u.beginPath(),u.arc(n/2,n/2,n/2,0,2*Math.PI),u.closePath(),u.fill()}let p=c.toDataURL("image/png");if(a){let n=C(c,{pub:t,content:a});if(n){let t=new Blob([n],{type:"image/png"});p=URL.createObjectURL(t)}}return p}({pub:t,size:n,dark:e,draw:r,reflect:i,round:o,embed:a,p3:c});return N[f]=l,l}function U(t="gun-avatar"){let n=!1;if(!n){class e extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.img=document.createElement("img"),this.shadowRoot.append(this.img)}render(){this.pub=this.getAttribute("pub")||"1234123455Ute2tFhdjDQgzR-1234lfSlZxgEZKuquI.2F-j1234434U1234Asj-5lxnECG5TDyuPD8gEiuI123",this.size=this.hasAttribute("size")?Number(this.getAttribute("size")):400,this.draw=this.getAttribute("draw")||"circles",this.reflect=!this.hasAttribute("reflect")||"false"!==this.getAttribute("reflect"),this.round=this.hasAttribute("round")||""===this.getAttribute("round"),this.dark=!!this.hasAttribute("dark")&&""!=this.getAttribute("dark"),this.embed=!this.hasAttribute("embed")||"false"!==this.getAttribute("embed"),this.svg=this.hasAttribute("dark")&&this.getAttribute("dark"),this.p3=!this.hasAttribute("p3")||"false"!==this.getAttribute("p3");let t=this.getAttribute("embed");if(this.getAttribute("embed"))try{t=JSON.parse(this.getAttribute("embed"))}catch{}this.img.style.borderRadius=this.round?"100%":"0%",this.img.src=P({pub:this.pub,size:this.size,dark:this.dark,draw:this.draw,reflect:this.reflect,round:this.round,svg:this.svg,embed:"false"!==t&&(t||!0),p3:this.p3})}connectedCallback(){this.render()}static get observedAttributes(){return["pub","round","size","dark","draw","reflect","embed","p3"]}attributeChangedCallback(){this.render()}}customElements.define(t,e),n=!0}}(()=>{if(typeof window>"u"||typeof window.CanvasRenderingContext2D>"u"||!function(){let t=document.createElement("canvas").getContext("2d");t.fillRect(0,0,40,40),t.drawImage(t.canvas,-40,-40,80,80,50,50,20,20);let n=t.getImageData(50,50,30,30),e=new Uint32Array(n.data.buffer),r=(t,r)=>e[r*n.width+t];return[[9,9],[20,9],[9,20],[20,20]].some(([t,n])=>0!==r(t,n))||[[10,10],[19,10],[10,19],[19,19]].some(([t,n])=>0===r(t,n))}())return;let t=CanvasRenderingContext2D.prototype,n=t.drawImage;n&&(t.drawImage=function(t,e,r){if(9!==arguments.length)return n.apply(this,[...arguments]);let i=function(t,n,e,r,i,o,a,s,c){let{width:u,height:f}=function(t){let n=n=>{let e=globalThis[n];return e&&t instanceof e};if(n("HTMLImageElement"))return{width:t.naturalWidth,height:t.naturalHeight};if(n("HTMLVideoElement"))return{width:t.videoWidth,height:t.videoHeight};if(n("SVGImageElement"))throw new TypeError("SVGImageElement isn't yet supported as source image.","UnsupportedError");if(n("HTMLCanvasElement")||n("ImageBitmap"))return t}(t);r<0&&(n+=r,r=Math.abs(r)),i<0&&(e+=i,i=Math.abs(i)),s<0&&(o+=s,s=Math.abs(s)),c<0&&(a+=c,c=Math.abs(c));let l=Math.max(n,0),p=Math.min(n+r,u),h=Math.max(e,0),d=Math.min(e+i,f),g=s/r,m=c/i;return[t,l,h,p-l,d-h,n<0?o-n*g:o,e<0?a-e*m:a,(p-l)*g,(d-h)*m]}(...arguments);return o=i,[3,4,7,8].some(t=>!o[t])?void 0:n.apply(this,i);var o})})();export{P as G,U as Q,e as a,n as b,i as c,r as g,f as r};
