import{s as a,r as e,c as t,w as l,C as s,l as r,u as n,p as c,A as i,v as o,B as u,J as v,F as d,z as p,T as h,Q as g,q as k}from"./vue-BFlYoKLU.js";import{a as m,d as y,_ as j}from"./index-DY1NY_80.js";import"./vendor-BVGoMDL0.js";import"./gun-2f3uxVze.js";const f={class:"project-detail-page"},b={key:0,class:"loading-container"},w={key:1,class:"error-container"},L={key:2,class:"project-detail-container"},A={class:"project-header"},P={class:"project-header-content"},U={class:"project-badges"},S={key:0,class:"featured-badge"},C={class:"project-title"},_={class:"project-description"},I={class:"project-stats"},D={class:"stat-item"},W={class:"stat-label"},x={class:"stat-value"},z={key:0,class:"stat-item"},B={class:"stat-label"},$={class:"stat-value"},E={class:"stat-item"},F={class:"stat-label"},H={class:"stat-value"},T={key:1,class:"stat-item"},M={class:"stat-label"},R={class:"stat-value"},G={class:"project-links"},N=["href"],V=["href"],q={class:"project-cover"},J=["src","alt"],K={key:1,class:"default-cover"},Q={class:"cover-text"},Z={class:"project-content"},O={class:"project-technologies"},X={class:"tech-tags"},Y={key:0,class:"project-features"},aa={class:"features-list"},ea={class:"markdown-section"},ta={key:0,class:"markdown-loading"},la=["innerHTML"],sa={key:2,class:"no-content"},ra={key:0,class:"related-projects"},na={class:"related-projects-grid"},ca=["onClick"],ia={class:"related-project-info"},oa=j(a({__name:"project-detail",setup(a){const j=h(),oa=g(),{locale:ua,isZh:va,setLocale:da}=m(),{getProjectBySlug:pa,getRelatedProjects:ha,loadProjectData:ga,getLocalizedValue:ka,getLocalizedArrayValue:ma,loadMarkdownContent:ya}=y(),ja=e(!0),fa=e(null),ba=e(null),wa=e(null),La=e(!1),Aa=e(ua.value);e(null);const Pa=t(()=>ba.value?ha(ba.value,3):[]),Ua=async()=>{try{ja.value=!0,fa.value=null,wa.value=null;const e=j.params.slug,t=Array.isArray(e)?e[0]:e;if(!t||"string"!=typeof t)throw new Error(va.value?"é¡¹ç›®æ ‡è¯†ç¬¦æ— æ•ˆ":"Invalid project slug");await ga();const l=pa(t);if(!l)throw new Error(va.value?"é¡¹ç›®ä¸å­˜åœ¨":"Project not found");let s={...l};if(l.githubUrl){const a=await(async a=>{try{const e=a.match(/github\.com\/([^/]+)\/([^/]+)/);if(!e)return null;const[,t,l]=e,s=`https://api.github.com/repos/${t}/${l}`,r=await fetch(s);return r.ok?(await r.json()).stargazers_count||0:null}catch(e){return null}})(l.githubUrl);null!==a&&(s.githubStars=a)}if(ba.value=s,l.mdPath){La.value=!0;try{const a=ka(l.mdPath),e=await ya(a);e&&(wa.value=e,Sa(e))}catch(a){}finally{La.value=!1}}}catch(e){fa.value=e instanceof Error?e.message:"Unknown error"}finally{ja.value=!1}};l(()=>{const a=j.params.slug;if(a)return Array.isArray(a)?a[0]:a},a=>{a&&"string"==typeof a&&Ua()},{immediate:!0});const Sa=a=>{if(!ba.value||ba.value.coverImage)return;const e=a.match(/<img[^>]+src=["']([^"']+)["'][^>]*>/i);if(!e)return;const t=e[1];let l="";if(t.startsWith("./")||t.startsWith("../")||!t.startsWith("http")&&!t.startsWith("/")){l=(ba.value.mdPath?ka(ba.value.mdPath).replace(/\/[^/]*$/,"/"):"/md/")+t.replace(/^\.\//,"")}else(t.startsWith("/")||t.startsWith("http"))&&(l=t);l&&(ba.value={...ba.value,coverImage:l})};l(ua,()=>{Aa.value=ua.value});const Ca=a=>new Date(a).toLocaleDateString(va.value?"zh-CN":"en-US"),_a=a=>{a.target.style.display="none"};return s(Ua),(a,e)=>{return k(),r("div",f,[ja.value?(k(),r("div",b,[e[1]||(e[1]=c("div",{class:"loading-spinner"},null,-1)),c("p",null,i(o(va)?"åŠ è½½é¡¹ç›®è¯¦æƒ…...":"Loading project details..."),1)])):fa.value?(k(),r("div",w,[e[2]||(e[2]=c("div",{class:"error-icon"},"âš ï¸",-1)),c("h2",null,i(o(va)?"åŠ è½½å¤±è´¥":"Loading Failed"),1),c("p",null,i(fa.value),1),c("button",{onClick:Ua,class:"retry-button"},i(o(va)?"é‡è¯•":"Retry"),1)])):ba.value?(k(),r("div",L,[c("div",A,[c("div",P,[c("button",{onClick:e[0]||(e[0]=e=>a.$router.back()),class:"back-button"}," â† "+i(o(va)?"è¿”å›ž":"Back"),1),c("div",U,[c("span",{class:u(["status-badge",ba.value.status.toLowerCase()])},i((l=ba.value.status,{Active:va.value?"æ´»è·ƒå¼€å‘":"Active",Stable:va.value?"ç¨³å®šç‰ˆæœ¬":"Stable",Archived:va.value?"å·²å½’æ¡£":"Archived",Beta:va.value?"æµ‹è¯•ç‰ˆæœ¬":"Beta"}[l]||l)),3),ba.value.featured?(k(),r("span",S," â­ ")):n("",!0)]),c("h1",C,i(o(ka)(ba.value.title)),1),c("p",_,i(o(ka)(ba.value.description)),1),c("div",I,[c("div",D,[c("span",W,i(o(va)?"åˆ›å»ºè€…":"Author"),1),c("span",x,i(ba.value.author),1)]),void 0!==ba.value.githubStars?(k(),r("div",z,[c("span",B,i((o(va),"GitHub Stars")),1),c("span",$,"â­ "+i((t=ba.value.githubStars,t>=1e3?(t/1e3).toFixed(1)+"k":t.toString())),1)])):n("",!0),c("div",E,[c("span",F,i(o(va)?"å‘å¸ƒæ—¥æœŸ":"Published"),1),c("span",H,i(Ca(ba.value.publishDate)),1)]),ba.value.lastUpdate?(k(),r("div",T,[c("span",M,i(o(va)?"æœ€åŽæ›´æ–°":"Last Update"),1),c("span",R,i(Ca(ba.value.lastUpdate)),1)])):n("",!0)]),c("div",G,[ba.value.githubUrl?(k(),r("a",{key:0,href:ba.value.githubUrl,target:"_blank",rel:"noopener noreferrer",class:"project-link github-link"},e[3]||(e[3]=[c("span",{class:"link-icon"},"ðŸ”—",-1),v(" GitHub ")]),8,N)):n("",!0),ba.value.demoUrl?(k(),r("a",{key:1,href:ba.value.demoUrl,target:"_blank",rel:"noopener noreferrer",class:"project-link demo-link"},[e[4]||(e[4]=c("span",{class:"link-icon"},"ðŸš€",-1)),v(" "+i(o(va)?"åœ¨çº¿æ¼”ç¤º":"Live Demo"),1)],8,V)):n("",!0)])]),c("div",q,[ba.value.coverImage&&"/images/projects/default-cover.jpg"!==ba.value.coverImage?(k(),r("img",{key:0,src:ba.value.coverImage,alt:o(ka)(ba.value.title),class:"cover-image",onError:_a},null,40,J)):(k(),r("div",K,[e[5]||(e[5]=c("div",{class:"grid-pattern"},null,-1)),c("div",Q,[c("h3",null,i(o(ka)(ba.value.title)),1),c("p",null,i(ba.value.category),1)])]))])]),c("div",Z,[c("div",O,[c("h3",null,i(o(va)?"ä½¿ç”¨æŠ€æœ¯":"Technologies"),1),c("div",X,[(k(!0),r(d,null,p(ba.value.technologies,a=>(k(),r("span",{key:a,class:"tech-tag"},i(a),1))),128))])]),o(ma)(ba.value.features)?.length?(k(),r("div",Y,[c("h3",null,i(o(va)?"ä¸»è¦ç‰¹æ€§":"Key Features"),1),c("ul",aa,[(k(!0),r(d,null,p(o(ma)(ba.value.features),a=>(k(),r("li",{key:a},i(a),1))),128))])])):n("",!0),c("div",ea,[c("h3",null,i(o(va)?"é¡¹ç›®è¯¦æƒ…":"Project Details"),1),La.value?(k(),r("div",ta,[e[6]||(e[6]=c("div",{class:"loading-spinner"},null,-1)),c("p",null,i(o(va)?"åŠ è½½è¯¦ç»†å†…å®¹...":"Loading detailed content..."),1)])):wa.value?(k(),r("div",{key:1,class:"markdown-content",innerHTML:wa.value},null,8,la)):(k(),r("div",sa,[c("p",null,i(o(va)?"æš‚æ— è¯¦ç»†å†…å®¹":"No detailed content available"),1)]))])]),Pa.value.length?(k(),r("div",ra,[c("h3",null,i(o(va)?"ç›¸å…³é¡¹ç›®":"Related Projects"),1),c("div",na,[(k(!0),r(d,null,p(Pa.value,a=>(k(),r("div",{key:a.id,class:"related-project-card",onClick:e=>{return t=a.slug,void oa.push(`/projects/${t}`);var t}},[c("div",ia,[c("h4",null,i(o(ka)(a.title)),1),c("p",null,i(o(ka)(a.excerpt)),1)])],8,ca))),128))])])):n("",!0)])):n("",!0)]);var t,l}}}),[["__scopeId","data-v-00cead2e"]]);export{oa as default};
