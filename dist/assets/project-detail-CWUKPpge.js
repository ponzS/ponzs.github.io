import{e,r as a,c as t,w as l,j as s,a as r,f as n,b as c,t as o,u as i,n as u,p as v,F as d,i as p,G as h,E as g,o as k}from"./vue-D4wD2Vkb.js";import{u as m,a as y,_ as j}from"./index-DaoSW1E7.js";import"./utils-BrGt3VpK.js";import"./markdown-tTXJ_NsS.js";const f={class:"project-detail-page"},b={key:0,class:"loading-container"},w={key:1,class:"error-container"},L={key:2,class:"project-detail-container"},P={class:"project-header"},U={class:"project-header-content"},A={class:"project-badges"},S={key:0,class:"featured-badge"},_={class:"project-title"},C={class:"project-description"},I={class:"project-stats"},D={class:"stat-item"},F={class:"stat-label"},W={class:"stat-value"},x={key:0,class:"stat-item"},E={class:"stat-label"},H={class:"stat-value"},$={class:"stat-item"},z={class:"stat-label"},B={class:"stat-value"},G={key:1,class:"stat-item"},M={class:"stat-label"},R={class:"stat-value"},T={class:"project-links"},N=["href"],V=["href"],K={class:"project-cover"},Z=["src","alt"],q={key:1,class:"default-cover"},J={class:"cover-text"},O={class:"project-content"},Q={class:"project-technologies"},X={class:"tech-tags"},Y={key:0,class:"project-features"},ee={class:"features-list"},ae={class:"markdown-section"},te={key:0,class:"markdown-loading"},le=["innerHTML"],se={key:2,class:"no-content"},re={key:0,class:"related-projects"},ne={class:"related-projects-grid"},ce=["onClick"],oe={class:"related-project-info"},ie=j(e({__name:"project-detail",setup(e){const j=h(),ie=g(),{locale:ue,isZh:ve,setLocale:de}=m(),{getProjectBySlug:pe,getRelatedProjects:he,loadProjectData:ge,getLocalizedValue:ke,getLocalizedArrayValue:me,loadMarkdownContent:ye}=y(),je=a(!0),fe=a(null),be=a(null),we=a(null),Le=a(!1),Pe=a(ue.value);a(null);const Ue=t(()=>be.value?he(be.value,3):[]),Ae=async()=>{try{je.value=!0,fe.value=null,we.value=null;const a=j.params.slug,t=Array.isArray(a)?a[0]:a;if(!t||"string"!=typeof t)throw new Error(ve.value?"项目标识符无效":"Invalid project slug");await ge();const l=pe(t);if(!l)throw new Error(ve.value?"项目不存在":"Project not found");let s={...l};if(l.githubUrl){const e=await(async e=>{try{const a=e.match(/github\.com\/([^/]+)\/([^/]+)/);if(!a)return null;const[,t,l]=a,s=`https://api.github.com/repos/${t}/${l}`,r=await fetch(s);return r.ok?(await r.json()).stargazers_count||0:null}catch(a){return console.error("Failed to fetch GitHub stars:",a),null}})(l.githubUrl);null!==e&&(s.githubStars=e)}if(be.value=s,l.mdPath){Le.value=!0;try{const e=ke(l.mdPath),a=await ye(e);a&&(we.value=a,Se(a))}catch(e){console.error("Failed to load markdown content:",e)}finally{Le.value=!1}}}catch(a){fe.value=a instanceof Error?a.message:"Unknown error"}finally{je.value=!1}};l(()=>{const e=j.params.slug;if(e)return Array.isArray(e)?e[0]:e},e=>{e&&"string"==typeof e&&Ae()},{immediate:!0});const Se=e=>{if(!be.value||be.value.coverImage)return;const a=e.match(/<img[^>]+src=["']([^"']+)["'][^>]*>/i);if(!a)return;const t=a[1];let l="";if(t.startsWith("./")||t.startsWith("../")||!t.startsWith("http")&&!t.startsWith("/")){l=(be.value.mdPath?ke(be.value.mdPath).replace(/\/[^/]*$/,"/"):"/md/")+t.replace(/^\.\//,"")}else(t.startsWith("/")||t.startsWith("http"))&&(l=t);l&&(be.value={...be.value,coverImage:l})};l(ue,()=>{Pe.value=ue.value});const _e=e=>new Date(e).toLocaleDateString(ve.value?"zh-CN":"en-US"),Ce=e=>{e.target.style.display="none"};return s(Ae),(e,a)=>{return k(),r("div",f,[je.value?(k(),r("div",b,[a[1]||(a[1]=c("div",{class:"loading-spinner"},null,-1)),c("p",null,o(i(ve)?"加载项目详情...":"Loading project details..."),1)])):fe.value?(k(),r("div",w,[a[2]||(a[2]=c("div",{class:"error-icon"},"⚠️",-1)),c("h2",null,o(i(ve)?"加载失败":"Loading Failed"),1),c("p",null,o(fe.value),1),c("button",{onClick:Ae,class:"retry-button"},o(i(ve)?"重试":"Retry"),1)])):be.value?(k(),r("div",L,[c("div",P,[c("div",U,[c("button",{onClick:a[0]||(a[0]=a=>e.$router.back()),class:"back-button"}," ← "+o(i(ve)?"返回":"Back"),1),c("div",A,[c("span",{class:u(["status-badge",be.value.status.toLowerCase()])},o((l=be.value.status,{Active:ve.value?"活跃开发":"Active",Stable:ve.value?"稳定版本":"Stable",Archived:ve.value?"已归档":"Archived",Beta:ve.value?"测试版本":"Beta"}[l]||l)),3),be.value.featured?(k(),r("span",S," ⭐ ")):n("",!0)]),c("h1",_,o(i(ke)(be.value.title)),1),c("p",C,o(i(ke)(be.value.description)),1),c("div",I,[c("div",D,[c("span",F,o(i(ve)?"创建者":"Author"),1),c("span",W,o(be.value.author),1)]),void 0!==be.value.githubStars?(k(),r("div",x,[c("span",E,o((i(ve),"GitHub Stars")),1),c("span",H,"⭐ "+o((t=be.value.githubStars,t>=1e3?(t/1e3).toFixed(1)+"k":t.toString())),1)])):n("",!0),c("div",$,[c("span",z,o(i(ve)?"发布日期":"Published"),1),c("span",B,o(_e(be.value.publishDate)),1)]),be.value.lastUpdate?(k(),r("div",G,[c("span",M,o(i(ve)?"最后更新":"Last Update"),1),c("span",R,o(_e(be.value.lastUpdate)),1)])):n("",!0)]),c("div",T,[be.value.githubUrl?(k(),r("a",{key:0,href:be.value.githubUrl,target:"_blank",rel:"noopener noreferrer",class:"project-link github-link"},a[3]||(a[3]=[c("span",{class:"link-icon"},"🔗",-1),v(" GitHub ")]),8,N)):n("",!0),be.value.demoUrl?(k(),r("a",{key:1,href:be.value.demoUrl,target:"_blank",rel:"noopener noreferrer",class:"project-link demo-link"},[a[4]||(a[4]=c("span",{class:"link-icon"},"🚀",-1)),v(" "+o(i(ve)?"在线演示":"Live Demo"),1)],8,V)):n("",!0)])]),c("div",K,[be.value.coverImage&&"/images/projects/default-cover.jpg"!==be.value.coverImage?(k(),r("img",{key:0,src:be.value.coverImage,alt:i(ke)(be.value.title),class:"cover-image",onError:Ce},null,40,Z)):(k(),r("div",q,[a[5]||(a[5]=c("div",{class:"grid-pattern"},null,-1)),c("div",J,[c("h3",null,o(i(ke)(be.value.title)),1),c("p",null,o(be.value.category),1)])]))])]),c("div",O,[c("div",Q,[c("h3",null,o(i(ve)?"使用技术":"Technologies"),1),c("div",X,[(k(!0),r(d,null,p(be.value.technologies,e=>(k(),r("span",{key:e,class:"tech-tag"},o(e),1))),128))])]),i(me)(be.value.features)?.length?(k(),r("div",Y,[c("h3",null,o(i(ve)?"主要特性":"Key Features"),1),c("ul",ee,[(k(!0),r(d,null,p(i(me)(be.value.features),e=>(k(),r("li",{key:e},o(e),1))),128))])])):n("",!0),c("div",ae,[c("h3",null,o(i(ve)?"项目详情":"Project Details"),1),Le.value?(k(),r("div",te,[a[6]||(a[6]=c("div",{class:"loading-spinner"},null,-1)),c("p",null,o(i(ve)?"加载详细内容...":"Loading detailed content..."),1)])):we.value?(k(),r("div",{key:1,class:"markdown-content",innerHTML:we.value},null,8,le)):(k(),r("div",se,[c("p",null,o(i(ve)?"暂无详细内容":"No detailed content available"),1)]))])]),Ue.value.length?(k(),r("div",re,[c("h3",null,o(i(ve)?"相关项目":"Related Projects"),1),c("div",ne,[(k(!0),r(d,null,p(Ue.value,e=>(k(),r("div",{key:e.id,class:"related-project-card",onClick:a=>{return t=e.slug,void ie.push(`/projects/${t}`);var t}},[c("div",oe,[c("h4",null,o(i(ke)(e.title)),1),c("p",null,o(i(ke)(e.excerpt)),1)])],8,ce))),128))])])):n("",!0)])):n("",!0)]);var t,l}}}),[["__scopeId","data-v-00cead2e"]]);export{ie as default};
